<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet/less" type="text/css" href="style.less" />
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
    <script src="jquery-3.2.1.min.js"></script>
    <script src="less.js" type="text/javascript"></script>
    <script src="tabs.js" type="text/javascript"></script>
    <script src="attendance.js" type="text/javascript"></script>
    <script src="plotly-latest.min.js"></script>
    <script>
    function handle(e){
        if(e.keyCode === 13){
            e.preventDefault(); // Ensure it is only this code that rusn
            onAddRow();
        }
    }
    </script>
</head>
<body>


<!-- tab information gotten from https://www.w3schools.com/howto/howto_js_tabs.asp !-->


    <div id = "the-key-heading">
        The Key
    </div>

<div class="tab">
<button id = "defaultOpen" class = "tablinks" onclick = "openTab(event, 'Home')" > Home </button>
<button class = "tablinks" onclick = "openTab(event, 'Data'); displayAttendanceList();"> Attendance Sheets </button>
<button class = "tablinks" onclick = "openTab(event, 'AttendanceOverview') "> Attendance Overview </button>
<button class = "tablinks" onclick = "openTab(event, 'StudentProfiles')"> Student Profiles</button>
<button class = "tablinks" onclick = "openTab(event, 'StaffSchedules'); showAttendanceManage();">Manage Attendance</button>
<button class = "tablinks" onclick = "openTab(event, 'Edit Attendance Sheets')"> Feedback Forum </button>
</div>

<div id="Home" class="tabcontent">
    <h1> Welcome to the Key Attendance Portal!</h1>


    <div style="width: 100%; overflow: hidden;">
        <div id="masterGraph" style="width: 500px; float: left;"></div>
        <div id="activityGraph" style="margin-left: 520px;"></div>
    </div>
</div>

<div id="Data" class="tabcontent" >

    <div id="attendanceListDiv">
        <h1> Select an Attendance List </h1>
        <input id="createNewAttendance" type="button" value="Create New Attendance Sheet" onclick="createNewAttendance()" />
        <h2> Recent Attendance Lists </h2>
        <ul id="attendanceList">
        </ul>
        <h2> Find Attendance Sheet for Date </h2>
        <form onsubmit="return false;">
            <input type="date" id="datePicker" />
            <input type="submit" onclick="getDate()" />
        </form>
    </div>

    <div id="attendanceDiv">
        <div id="aboveTable">
            <div id="leftStuff">
                <button id="returnAttendanceList" onclick="returnAttendance()">
                    Return
                </button>

                <h2 id="attendanceName"> Attendance Sheet 10/19/2017 </h2>


                <p id="storeDate"></p>

                <form onsubmit="return false;" id="suggestForm">
                    <input list="suggestedStudents" name="nameEnter" onkeyup="handleAddBox(event, this.value)" id="keyword" type="text" placeholder="Name" required /></label>
                    <input onclick="onAddRow()" id="searchbutton" type="button" value="Add">
                    <datalist id="suggestedStudents"></datalist>
                </form>
            </div>

            <div id="rightStuff">
                <div id="innerRight">
                    <button type="button" id="download" onclick="createFile()">Download</button>

                    <button id="addStudent" onclick="openAddStudent()">Add New Student</button>
                </div>
            </div>
        </div>
            <div id="studentDiv" class="addStudentContent">
                <div class="addStudentHeader">
                    <h2 id="popUpHeader">Add Student</h2>
               </div>
                <div class="modal-body">
                    <form>
                        First name:<br>
                        <input type="text" name="firstname" id="newStudentFirst"><br>
                        Last name:<br>
                        <input type="text" name="lastname" id="newStudentLast">
                    </form>
                </div>
                <div class="modal-footer">
                    <input type="button" onclick="closeAddStudent()" id="close" value="Cancel" />
                    <input type="button" onclick="addNewStudent()" id="submitStudent" value="Submit" />
                </div>
            </div>
            <p id="columns"></p>
            <table id="Attendance-Table" style="width:100%">
                <tr>
                <th>Name</th>
                <th>Art</th>
                <th>Make Food</th>
                    <th>Recieved Food</th>
                    <th>Leadership</th>
                    <th>Exercise</th>
                    <th>Mental Health</th>
                    <th>Volunteering</th>
                    <th>One On One</th>


            </table>

    </div>
</div>


<div id="AttendanceOverview" class="tabcontent">
    <h3>Statistics On Past Attendance Sheets</h3>
    <div id="attendanceOverviewContent">
        <div id="attendanceTable">
            <table id="masterAttendanceTable" style="width:100%">
                <tr>
                    <th>Date</th>
                    <th>Attendees</th>
                    <th>Art</th>
                    <th>Make Food</th>
                    <th>Recieved Food</th>
                    <th>Leadership</th>
                    <th>Exercise</th>
                    <th>Mental Health</th>
                    <th>Volunteering</th>
                    <th>One On One</th>
                </tr>
            </table>
        </div>
        <div id="downloadMaster">
            <button onclick="downloadAllMaster()">Download All Data</button>
            <h2>Download Data Between Two Dates</h2>
            <form onsubmit="return false;">
                Start Date <br>
                <input type="date" id="startDate" /><br>
                End Date <br>
                <input type="date" id="endDate" /><br>
                <input type="submit" onclick="downloadMasterDates()" />
            </form>


        </div>
    </div>
</div>

<div id="StudentProfiles" class="tabcontent">

    <div id="profileSearch">
        <h3>Student Profiles</h3>
        <form>
            <input list="suggestedStudents" name="nameEnter" onkeypress="handleProfileBox(event, this.value)" id="keywordStudentSearch" type="text" placeholder="Name" required /></label>
            <input onclick="showStudentProfile()" id="searchbutton" type="button" value="Submit">
        </form>
        <div id="studentInfo">
            <h3 id = "studentName">

              </h3>
            <p id="studentProfileText">


            </p>
            <!-- <aside>
              <div id="graphStudent">

              </div>
              <div id="studentTimes">

              </div>
            <aside> -->
            <div style="width: 100%; overflow: hidden;">
                <div id="graphStudent" style="width: 500px; float: left;"></div>
                <div id="studentTimes" style="margin-left: 520px;"></div>
                <div id="frequentPeers" style="width: 500px; float: left;">Frequently Attends With:</div>
            </div>
        <table id="profileAttendanceTable">
        </table>
        </div>
    </div>
</div>

<div id="StaffSchedules" class="tabcontent">
<h2>Current Attendance Columns</h2>
    <form>
        <input type="text" id="newColumn" />
        <input type="submit" onclick="addColumn();" />
    </form>
    <table id="attendanceColumnsTable"></table>
</div>

<div id="Edit Attendance Sheets" class="tabcontent">
  <h3>Feedback Forum</h3>
    <textarea id = "feedback" rows="4" cols="50">

    </textarea>

        <button onclick = "sendFeedback()"> submit </button>
</div>
</body>

</html>

<script>
    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();
    displayMasterAttendance();
</script>
