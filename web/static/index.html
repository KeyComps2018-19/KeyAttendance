<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet/less" type="text/css" href="style.less" />
        <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
        <script src="jquery-3.2.1.min.js"></script>
        <script src="less.js" type="text/javascript"></script>
        <script src="tabs.js" type="text/javascript"></script>
        <script src="newAttendance.js" type="text/javascript"></script>
        <script src="alerts.js" type="text/javascript"></script>
        <script src="plotly-latest.min.js"></script>
        <script>
            function handle(e){
                if(e.keyCode === 13){
                    e.preventDefault(); // Ensure it is only this code that runs
                    onAddRow();
                }
            }
        </script>
    </head>

    <body>

        <div id = "the-key-heading">The Key</div>

        <!-- tab information gotten from https://www.w3schools.com/howto/howto_js_tabs.asp !-->
        <div id="tabs">
            <div id = "defaultOpen" class = "tablinks" onclick = "openTab(event, 'Data'); createNewAttendance();"> Attendance Sheets </div>
            <div class = "tablinks" onclick = "openTab(event, 'AttendanceOverview'); displayMasterAttendance()"> Attendance Overview </div>
            <div id = "studentProfileTab" class = "tablinks" onclick = "openTab(event, 'StudentProfiles')"> Student Profiles</div>
            <div class = "tablinks" onclick = "openTab(event, 'AttendanceCols'); showAttendanceManage();">Attendance Columns</div>
            <div class = "tablinks" onclick = "openTab(event, 'Feedback Forum')"> Feedback Forum </div>
            <div class = "tablinks" onclick = "openTab(event, 'Manage Student Profile'); showManageProfile();"> Manage Profile </div>
        </div>


        <div id="Data" class="tabcontent" >

            <div id="attendanceListDiv">
                <h1>Select an Attendance List</h1>
                <input id="createNewAttendance" type="button" value="Create New Attendance Sheet" onclick="createNewAttendance()" />
                <h2>Recent Attendance Lists</h2>
                <ul id="attendanceList"></ul>
                <h2>Find Attendance Sheet for Date</h2>
                <form onsubmit="return false;">
                    <input type="date" id="datePicker" />
                    <input type="submit" onclick="getDate()" />
                </form>
            </div>

            <div id="attendanceDiv">
                <div id="aboveTable">
                    <div id="leftStuff">
                        <button id="returnAttendanceList" onclick="returnAttendance()" type="button" class="tabishButton">All Dates</button>

                        <h2 id="attendanceName">Attendance Sheet placeholder</h2>


                        <p id="storeDate"></p>

                        <form autocomplete="off" onsubmit="return false;" id="suggestForm">
                            <input list="suggestedStudents" name="nameEnter" onkeyup="handleAddBox(event, this.value)" id="keyword" type="text" placeholder="Name" required>
                            <input onclick="onAddRow()" id="searchbutton" type="button" value="Add" class=tabishButton>
                            <datalist id="suggestedStudents"></datalist>
                        </form>
                    </div>

                    <div id="rightStuff">
                        <button class="tabishButton" type="button" id="download" onclick="createFile()">Download</button>
                        <button id="refresh" class="tabishButton" type="button" onclick="refreshAttendanceTable()">Refresh</button>
                        <button id="addStudent" class="tabishButton" type="button" onclick="openAddStudent()">Add New Student</button>
                    </div>
                </div>
                    <div id="studentDiv" class="addStudentContent">
                        <div class="addStudentHeader">
                            <h2 id="popUpHeader">Add Student</h2>
                       </div>
                        <div class="modal-body">
                            <form>
                                First name:<br>
                                <input type="text" name="firstname" id="newStudentFirst"><br>
                                Last name:<br>
                                <input type="text" name="lastname" id="newStudentLast">
                            </form>
                        </div>
                        <div class="modal-footer">
                            <input type="button" onclick="closeAddStudent()" id="close" value="Cancel" />
                            <input type="button" onclick="addNewStudent()" id="submitStudent" value="Submit" />
                        </div>
                    </div>
                <p id="columns"></p>
                <table id="Attendance-Table" style="width:100%"></table>
            </div>
        </div>

        <div id="AttendanceOverview" class="tabcontent">
            <h3>Statistics On Past Attendance Sheets</h3>
            <div id="attendanceOverviewContent">
                <p id="columnData"></p>
                <div id="attendanceTable">
                    <table id="masterAttendanceTable" style="width:100%"></table>
                </div>
                <div id="downloadMaster">
                    <button onclick="downloadAllMaster()">Download All Data</button>
                    <h2>Download Data Between Two Dates</h2>
                    <form onsubmit="return false;">
                        Start Date <br>
                        <input type="date" id="startDate" /><br>
                        End Date <br>
                        <input type="date" id="endDate" /><br>
                        <input type="submit" onclick="downloadMasterDates()" />
                    </form>
                </div>
            </div>
        </div>

        <div id="StudentProfiles" class="tabcontent">

            <div id="profileSearch">
                <h3>Student Profiles</h3>
                <form autocomplete="off" onsubmit="return false;">
                    <input list="suggestedStudents" name="nameEnter" onkeypress="handleProfileBox(event, this.value)" id="keywordStudentSearch" type="text" placeholder="Name" required />
                    <input onclick="showStudentProfile()" id="searchbutton" type="button" value="Submit">
                </form>
                <div id="studentInfo">
                    <h3 id = "studentName"></h3>
                    <img src="/static/resources/images/No-image-found.jpg" alt="Default image">
                    <p id="saveStudentData"></p>
                    <p id="saveStudentColumnData"></p>
                    <div id="demographics" ></div>
                    <p id="studentProfileText"></p>

                    <div style="width: 100%; overflow: hidden;">
                        <div id="graphStudent" style="width: 500px; float: left;"></div>
                        <div id="studentTimes" style="width: 500px; float: left;"></div>
                        <div id="frequentPeers" style="width: 200px; float: left;"></div>
                    </div>
                    <table id="profileAttendanceTable"></table>
                </div>
            </div>

            <div id="editProfile"></div>

        </div>

        <div id="AttendanceCols" class="tabcontent">
            <h2>Current Attendance Columns</h2>
            <form onsubmit="return false;">
                <input type="text" id="newColumn" />
                <input type="submit" onclick="addColumn();" />
            </form>
            <table id="attendanceColumnsTable"></table>
        </div>

        <div id="Feedback Forum" class="tabcontent">
            <h3>Feedback Forum</h3>
            <textarea id = "feedback" rows="4" cols="50"></textarea>
            <button onclick="sendFeedback()">Submit</button>
        </div>

        <div id="Manage Student Profile" class="tabcontent">
            <h2>Current Student Profile Columns</h2>
            <form onsubmit="return false;">
                <input type="text" id="studentColumnName" />
                <select id="studentColumnType">
                    <option value="varchar">Word</option>
                    <option value="boolean">True/False</option>
                    <option value="int">Number</option>
                    <option value="date">Date</option>
                </select>
                <input type="submit" onclick="addStudentColumn();" />
            </form>
            <table id="studentColumnsTable"></table>
        </div>

    </body>

</html>

<script>
    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();
</script>
