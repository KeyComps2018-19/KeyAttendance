{"version":3,"sources":["images/blank_profile_pic.jpg","components/Layout.js","components/Helpers.js","views/Login.js","components/ActivityCheckbox.js","components/ActivityCheckboxes.js","components/AttendanceOptions.js","components/AddStudentModal.js","components/Autocomplete.js","views/Attendance.js","components/Heatmap.js","views/Students.js","components/BarChart.js","views/Reports.js","components/AddUserModal.js","components/EditUserModal.js","components/EditUserButton.js","components/UserHistoryButton.js","components/UserHistory.js","components/Users.js","components/AddRoleModal.js","components/EditRoleModal.js","components/EditRoleButton.js","components/Roles.js","components/AssignStudentKeyModal.js","components/AssignStudentKeyButton.js","components/FileUploader.js","components/StudentKeys.js","components/ShiftDownButton.js","components/ShiftUpButton.js","components/ShowActivityCheckbox.js","components/AddActivityModal.js","components/Activities.js","components/StudentFieldCheckbox.js","components/AddStudentFieldModal.js","components/EditStudentFields.js","components/AdminTabs.js","views/Admin.js","views/NotFound.js","components/Router.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","Layout","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleItemClick","name","history","push","concat","logout","window","localStorage","removeItem","state","activeItem","show","children","permissionString","getItem","permissions","split","nav","indexOf","react_default","a","createElement","NavItem","key","onClick","navItems","Nav","Navbar","Header","Brand","Toggle","Collapse","pullRight","Component","withRouter","createBrowserHistory","domain","httpPost","url","body","arguments","length","undefined","token","fetch","method","headers","Content-Type","Authorization","JSON","stringify","then","response","status","error","json","httpPatch","httpGet","httpDelete","compareActivities","b","ordering","downloadAttendanceCSV","_callee","startDate","endDate","attendanceData","studentData","activityData","activities","i","entries","sheet","columns","keys","row","j","activity","papa","csvString","element","_args","regenerator_default","wrap","_context","prev","next","sent","sort","abrupt","is_showing","id","activity_id","type","student_id","date","str_value","num_value","first_name","last_name","t0","console","log","require","unparse","fields","data","document","setAttribute","encodeURIComponent","style","display","appendChild","click","removeChild","stop","downloadReportsCSV","columnHeaders","title","checkCredentials","Redirect","to","partitions","parse","atob","decodeToken","exp","Date","now","getEarlierDate","daysAgo","earlierDate","setDate","getDate","getPrevSunday","offset","getDay","getNextSaturday","Login","username","password","firstLogin","onUsernameChange","bind","assertThisInitialized","onPasswordChange","submit","setState","e","target","value","_this2","preventDefault","result","setItem","_this3","centerStyle","textAlign","className","Well","onSubmit","FormGroup","ControlLabel","FormControl","placeholder","onChange","Button","block","bsStyle","Alert","React","ActivityCheckbox","isChecked","activityType","toggleCheckboxChange","_this$props","toggleCheckbox","label","handleChange","prevstate","newState","objectSpread","checked","input","_this$state","checkbox","disabled","ActivityCheckboxes","studentID","numChecked","self","activityID","attendanceItemID","today","time","getHours","getMinutes","getSeconds","createCheckboxes","boxes","components_ActivityCheckbox","Label","AttendanceOptions","deleteRow","ids","CustomFunction","AddStudentModal","handleInfoChange","studentInfo","firstName","lastName","studentFields","cancel","onFirstNameChange","onLastNameChange","fieldsList","index","field","info_id","infoBody","createStudentInfo","infoResult","info","fieldName","Modal","Title","Body","controlId","validationState","validateInput","Feedback","createStudentInfoFields","Footer","Autocomplete","suggestions","userInput","currentTarget","filteredSuggestions","filter","suggestion","toLowerCase","startsWith","lastName1","lastName2","activeSuggestion","showSuggestions","innerText","handler","_targetInst","handleSubmit","onKeyDown","keyCode","selectedId","fullName","scrollUpHandler","scrollDownHandler","dropdown","getElementsByClassName","itemHeight","getBoundingClientRect","height","scrollPos","scrollTop","dropdownHeight","halfway","Math","round","suggestionsListComponent","_this$state2","map","react","Form","inline","autoComplete","hasUsername","defaultProps","Attendance","buildingCSV","students","attendanceItems","suggestionsArray","attendance","showStudentModal","prevDate","downloadCSV","addStudent","removeAttendanceRow","openModal","closeModal","updateDate","setDateToToday","getCurrentDate","fetchAndBuild","month","getMonth","day","getFullYear","item","makeSuggestionsArray","buildSheet","itemID","parseInt","activityList","lastHolder1","lastHolder2","tempArray","array","object","includes","splice","student","rows","localeCompare","accessor","priorityLevel","position","minWidth","sortable","CustomComponent","components_AddStudentModal","ButtonToolbar","float","paddingRight","paddingLeft","src_components_Autocomplete","build_default","column","direction","showPagination","callbacks","options","Heatmap","yArrayStudents","err","heatMapType","dataLength","yArray","x","reverse","toCompare","min","max","maxHeatMapColor","minLegendLabel","calculateMinDataPoint","maxLegendLabel","calculateMaxDataPoint","calculateHeatmapColor","colorRange","setYArrayRange","margin","es","width","scaleWidth","scaleHeight","top","left","xType","yType","axisType","yDomain","reverseYAxis","orientation","stroke","strokeWidth","rectStyle","rx","ry","continuous_color_legend_default","startTitle","midTitle","endTitle","startColor","endColor","Students","renderDisplayInfo","profileInfo","colInfo","innerHtml","ListGroupItem","renderEditInfo","entry","defaultValue","evt","mode","edit","studentsJson","studentColumnJson","parseCols","profileInfoPrelim","previousState","currentProps","uploadedPic","cols","sortCols","col","studentInfoId","updated","patchPost","int_value","bool_value","date_value","time_value","studentId","preState","getStudentProfile","studentProfileJson","profileData","profileDataPrelim","studentInfoJson","addTypes","returnedState","parseStudentInfo","startDateString","endDateString","heatMapJson","_context2","t1","test","infoId","returnednewState","entryFound","entryIndex","changedField","profileDataUpdated","newValue","posted","updateStudentInfo","d1","d2","time1","time2","currEntryDate","replace","dateToCompare","currIdx","firstEntry","daily_visits","compareTime","sameDay","dateEntryZeroEngagements","toISOString","slice","dayOfWeek","weekNum","dayEntry","mdyArray","processedData","strDays","floor","y","toString","color","reader","FileReader","onloadend","src","readAsDataURL","files","blankPic","ListGroup","parsedInfo","variant","components_Heatmap","formatData","handleNameChange","confirm","delete","BarChart","obj","labelAnchorX","labelAnchorY","Reports","startDateStringWeek","endDateStringWeek","startDateStringYear","endDateStringYear","byHourJson","byHourJsonForDownload","byDayJson","byDayJsonForDownload","byDayHeatMap","downloadHourlyCSV","downloadWeeklyCSV","downloadYearlyCSV","formatDayData","formatHourData","entryAsList","values","annualHeatMapEntry","dayOfWeekConverted","processedDataAnnual","currHour","hourArray","hourToCompareIdx","hourToCompare","count","hourEntry","hourOfDay","components_BarChart","AddUserModal","handleActiveCheckbox","is_active","confirmPassword","backendError","radioOptions","selectedOption","createRadioOptions","role_names","role_ids","groups","option","toggleRadioOptions","EditUserModal","handlePasswordButton","editPassword","role_name","onDelete","passwordBlock","EditUserButton","showUserModal","closeModalDelete","user","components_EditUserModal","UserHistoryButton","handleClick","UserHistory","closeHistoryView","datetime","action","Users","users","showingUsers","showingAllUsers","selectedUserHistory","selectedUsername","historyView","updateRow","getFormattedTime","showAllUsers","getUserHistory","roles","refreshRoles","toggleRefreshRoles","userId","find","newUser","last_login","boolean","dateString","splitDateTime","splitTime","hours","ampm","group_names","join","getUserRoleNames","lastLogin","isActive","checkmark","tableCallbacks","components_UserHistory","components_AddUserModal","AddRoleModal","permission_ids","checkboxes","perm_ids","perm_names","perm_name","EditRoleModal","EditRoleButton","showModal","role","components_EditRoleModal","Roles","permissions_list","deleteRole","components_AddRoleModal","AssignStudentKeyModal","oldID","searchArray","match","onCancel","setMatch","buildSuggestionsArray","setMatchFromSearch","citySpanStudents","student_key","studentKey","onClose","match_key","paddingTop","match_name","AssignStudentKeyButton","FileUploader","event","file","extension","upload","StudentKeys","unmatchedStudents","focusedStudent","handleRowClick","handleSearch","handleCSVUpload","processCSV","csv","tmpfail","fastMode","complete","header","output","components_AssignStudentKeyModal","components_FileUploader","ShiftDownButton","handleButtonClick","ShiftUpButton","ShowActivityCheckbox","AddActivityModal","handleCheckbox","inUse","lastOrdering","errorMsg","componentClass","Activities","patchActivityOrder","createNewActivity","swapOrder","updateCheckbox","getDataTypeName","id1","id2","activity_id1","activity_id2","activity1","activity2","type_name","up","down","components_AddActivityModal","StudentFieldCheckbox","quick_add","AddStudentFieldModal","handleInUseCheckbox","handleQuickAddCheckbox","quickAdd","EditStudentFields","createNewField","components_AddStudentFieldModal","AdminTabs","context","handleSelect","Tabs","activeKey","onSelect","Tab","eventKey","components_Users","components_Roles","components_Activities","components_EditStudentFields","components_StudentKeys","Admin","components_AdminTabs","NotFound","Jumbotron","Link","Router","components_Layout","location","pathname","Switch","Route","exact","path","component","render","App","components_Router","Boolean","hostname","ReactDOM","BrowserRouter","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8eac38db.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/blank_profile_pic.9a344a6c.jpg\";","import React, { Component } from 'react';\nimport { Navbar, Nav, NavItem } from 'react-bootstrap';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\n\nclass Layout extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state ={\n        activeItem: 'home'\n      }\n  }\n\n  handleItemClick = (name) => () => {\n    this.props.history.push(`/${name}`);\n  }\n\n  logout = () => () => {\n    window.localStorage.removeItem(\"key_credentials\");\n    window.localStorage.removeItem(\"permissions\")\n    this.props.history.push(`/`)\n  }\n\n  render() {\n    if (!this.props.show) { return this.props.children }\n    let permissionString = window.localStorage.getItem(\"permissions\");\n    let permissions = permissionString === null ? [] : permissionString.split(\",\")\n    let nav = [];\n    if (permissions.indexOf('view_attendanceitems') >= 0) {\n      nav.push(<NavItem key={0} onClick={this.handleItemClick('attendance')}>Attendance</NavItem>)\n    }\n    if (permissions.indexOf('view_students') >= 0) {\n      nav.push(<NavItem key={1} onClick={this.handleItemClick('students')}>Students</NavItem>)\n    }\n    if (permissions.indexOf('view_group') >= 0 || permissions.indexOf('view_user') >= 0) {\n      nav.push(<NavItem key={2} onClick={this.handleItemClick('admin')}>Admin</NavItem>)\n    }\n    let navItems = <Nav>\n        {nav}\n        <NavItem onClick={this.handleItemClick('reports')}>Reports</NavItem>\n      </Nav>\n    return (\n      <div>\n        <Navbar>\n            <Navbar.Header>\n                <Navbar.Brand onClick={this.handleItemClick('attendance')}>\n                    Key\n                </Navbar.Brand>\n                <Navbar.Toggle />\n            </Navbar.Header>\n            <Navbar.Collapse>\n              {navItems}\n              <Nav pullRight>\n                <NavItem onClick={this.logout()}>Logout</NavItem>\n              </Nav>\n            </Navbar.Collapse>\n        </Navbar>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nLayout.propTypes = {\n  history: PropTypes.shape({\n      push: PropTypes.func.isRequired,\n  }),\n};\n\nexport default withRouter(Layout);\n","//Helper functions for date selection in data visualizations\n\n\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport createBrowserHistory from 'history/createBrowserHistory';\n\n// Store helper functions that we'll probably re-use here!\n\nconst history = createBrowserHistory();\n\nconst domain = 'app.jordansybesma.com' // '127.0.0.1:8000'\n\nfunction httpPost(url, body={}) {\n\tconst token = window.localStorage.getItem(\"key_credentials\");\n\n\t// if we don't have a token, we shouldn't be trying to call this function.\n\tif (token === null) {\n\t\thistory.push(`/`)\n\t\treturn\n\t}\n\n\treturn fetch(url, {\n\t\tmethod: \"POST\",\n\t\theaders: {'Content-Type':'application/json', 'Authorization': 'JWT ' + token},\n\t\tbody: JSON.stringify(body)\n\t}).then(response => {\n\t\tif (response.status >= 400) {\n\t\t\t// Logout if we got a token validation error\n\t\t\tif (response.status === 403) {\n\t\t\t\tlogout()\n\t\t\t\thistory.push(`/`)\n\t\t\t}\n\t\t\treturn {'error':response.status}\n\t\t} else {\n\t\t\treturn response.json()\n\t\t}\n\t}); \n}\n\nfunction httpPatch(url, body={}) {\n\tconst token = window.localStorage.getItem(\"key_credentials\");\n\n\t// if we don't have a token, we shouldn't be trying to call this function.\n\tif (token === null) {\n\t\thistory.push(`/`)\n\t\treturn\n\t}\n\n\treturn fetch(url, {\n\t\tmethod: \"PATCH\",\n\t\theaders: {'Content-Type':'application/json', 'Authorization': 'JWT ' + token},\n\t\tbody: JSON.stringify(body)\n\t}).then(response => {\n\t\tif (response.status >= 400) {\n\t\t\t// Logout if we got a token validation error\n\t\t\tif (response.status === 403) {\n\t\t\t\tlogout()\n\t\t\t\thistory.push(`/`)\n\t\t\t}\n\t\t\treturn {'error':response.status}\n\t\t} else if (response) {\n\t\t\treturn response.json()\n\t\t} else {\n\t\t\treturn // we got nothing back\n\t\t}\n\t}); \n}\n\nfunction httpGet(url) {\n\tconst token = window.localStorage.getItem(\"key_credentials\");\n\t// if we don't have a token, we shouldn't be trying to call this function.\n\tif (token === null) {\n\t\thistory.push(`/`)\n\t\treturn\n\t}\n\n\treturn fetch(url, {\n\t\tmethod: \"GET\",\n\t\theaders: {'Content-Type':'application/json', 'Authorization': 'JWT ' + token},\n\t}).then(response => {\n\t\tif (response.status >= 400) {\n\t\t\t// Logout if we got a token validation error\n\t\t\tif (response.status === 403) {\n\t\t\t\tlogout()\n\t\t\t\thistory.push(`/`)\n\t\t\t}\n\t\t\treturn {'error':response.status}\n\t\t} else {\n\t\t\treturn response.json()\n\t\t}\n\t}); \n}\n\nfunction httpDelete(url, body={}) {\n\tconst token = window.localStorage.getItem(\"key_credentials\");\n\n\t// if we don't have a token, we shouldn't be trying to call this function.\n\tif (token === null) {\n\t\thistory.push(`/`)\n\t\treturn\n\t}\n  \n\treturn fetch(url, {\n\t\tmethod: \"DELETE\",\n\t\theaders: {'Content-Type':'application/json', 'Authorization': 'JWT ' + token},\n\t\tbody: JSON.stringify(body)\n\t}).then(response => {\n\t\tif (response.status >= 400) {\n\t\t\t// Logout if we got a token validation error\n\t\t\tif (response.status === 403) {\n\t\t\t\tlogout()\n\t\t\t\thistory.push(`/`)\n\t\t\t}\n\t\t\treturn {'error':response.status}\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t}); \n}\n\nfunction compareActivities(a,b) {\n\tif (a.ordering < b.ordering)\n\t  return -1;\n\tif (a.ordering > b.ordering)\n\t  return 1;\n\treturn 0;\n}\n\nfunction decodeToken(token) {\n\tlet partitions = token.split('.');\n    return JSON.parse(atob(partitions[1]));\n}\n\nfunction logout() {\n\twindow.localStorage.removeItem(\"key_credentials\");\n\twindow.localStorage.removeItem(\"permissions\");\n}\n\nasync function downloadAttendanceCSV(startDate, endDate=null) {\n\t// Get data\n\tconst url = (startDate === endDate || endDate === null) ? `https://${domain}/api/attendance/?day=${startDate}` : `https://${domain}/api/attendance/?startdate=${startDate}&enddate=${endDate}`;\n\tconst attendanceData = await httpGet(url);\n\tconst studentData = await httpGet(`https://${domain}/api/students/`);\n\tconst activityData = await httpGet(`https://${domain}/api/activities/`);\n\tactivityData.sort(compareActivities) // Make sure that our columns are in a consistent order\n\t// Make sure we got the data we came for.\n\tif (attendanceData.length === 0 || activityData.length === 0) {\n\t\treturn\n\t}\n\t// Build activity lookup table\n\tvar activities = {}\n\tfor (var i = 0; i < activityData.length; i++) {\n\t\tif (activityData[i].is_showing) {\n\t\t\tactivities[activityData[i].name] = {'id': activityData[i].activity_id, 'ordering': activityData[i].ordering, 'type': activityData[i].type}\n\t\t}\n\t}\n\n\t// Combine attendance items. Need to sort by date and student id.\n\tvar entries = {}\n\tfor (var i = 0; i < attendanceData.length; i++) {\n\t\tif (entries[`${attendanceData[i].student_id}${attendanceData[i].date}`] == null) {\n\t\t\tentries[`${attendanceData[i].student_id}${attendanceData[i].date}`] = {'date':attendanceData[i].date, 'id': attendanceData[i].student_id}\n\t\t}\n\t\tif (attendanceData[i].str_value !== null) {\n\t\t\tentries[`${attendanceData[i].student_id}${attendanceData[i].date}`][attendanceData[i].activity_id] = attendanceData[i].str_value;\n\t\t} else if (attendanceData[i].num_value !== null) {\n\t\t\tentries[`${attendanceData[i].student_id}${attendanceData[i].date}`][attendanceData[i].activity_id] = attendanceData[i].num_value;\n\t\t} else {\n\t\t\tentries[`${attendanceData[i].student_id}${attendanceData[i].date}`][attendanceData[i].activity_id] = 'Y';\n\t\t}\n\t}\n\n\t// Build spreadsheet\n\tvar sheet = []\n\tvar columns = ['Date','First', 'Last', 'Student Key']\n\tfor (var i = 0; i < activityData.length; i++) {\n\t\tif (activityData[i].is_showing) {\n\t\t\tcolumns.push(activityData[i].name)\n\t\t}\n\t}\n\tconst keys = Object.keys(entries)\n\tfor (var i = 0; i < keys.length ; i++) {\n\t\tvar row = []\n\t\t// match student data to current id\n\t\tfor (var j = 0; j < studentData.length; j++) { // unfortunately, student data isn't in any particular order. O(n) it is!\n\t\t\tif (studentData[j].id === entries[keys[i]].id) {\n\t\t\t\trow[1] = studentData[j].first_name;\n\t\t\t\trow[2] = studentData[j].last_name;\n\t\t\t\trow[3] = (studentData[j][\"student_key\"] !== null ? studentData[j][\"student_key\"] : 'N/A')\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} \n\t\tfor (var j = 0; j < columns.length; j++) {\n\t\t\tswitch (columns[j]) {\n\t\t\t\tcase 'Date':\n\t\t\t\t\trow[j] = entries[keys[i]].date\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'First':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Last':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Student Key':\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// If this row has a value for this column, put it in the table. Else plop an 'N' in this column.\n\t\t\t\t\tconst activity = activities[columns[j]];\n\t\t\t\t\tif (entries[keys[i]][activity.id] === undefined) {\n\t\t\t\t\t\tif (activity.type === 'boolean') {\n\t\t\t\t\t\t\trow[j] = 'N';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trow[j] = 'N/A';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow[j] = entries[keys[i]][activity.id];\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsheet.push(row);\n\t}\n\n\tconsole.log(\"sheet: \", sheet);\n\tconsole.log(\"columns: \", columns);\n\t// Put data in a CSV\n\tvar papa = require('papaparse') // a strangely named but fairly effective CSV library\n\tvar csvString = papa.unparse({\n\t\tfields: columns,\n\t\tdata: sheet\n\t});\n\n\t// Download - it's a lil janky but it works. Thanks, stackoverflow!\n\tvar element = document.createElement('a');\n\telement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(csvString));\n\telement.setAttribute('download', `Attendance_${(startDate === endDate || endDate === null) ? startDate : `${startDate}_${endDate}`}.csv`);\n\telement.style.display = 'none';\n\tdocument.body.appendChild(element);\n\telement.click();\n\tdocument.body.removeChild(element);\n}\n\nfunction downloadReportsCSV(json, columnHeaders, title) {\n\t// Put data in a CSV\n\tvar papa = require('papaparse') // a strangely named but fairly effective CSV library\n\tvar csvString = papa.unparse({\n\t\tfields: columnHeaders,\n\t\tdata: json\n\t});\n\n\t// Download - it's a lil janky but it works. Thanks, stackoverflow!\n\tvar element = document.createElement('a');\n\telement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(csvString));\n\telement.setAttribute('download', `${title}.csv`);\n\telement.style.display = 'none';\n\tdocument.body.appendChild(element);\n\telement.click();\n\tdocument.body.removeChild(element);\n}\n\n// Makes sure that we have a valid token, else redirects to login screen\nconst checkCredentials = (Component) => {\n\tconst token = window.localStorage.getItem(\"key_credentials\");\n\tif (token === null) {\n\t\treturn <Redirect to='/'/>;\n\t} \n\tlet tokenData = decodeToken(token);\n\tif (tokenData.exp < Date.now() / 1000) { \n\t\tlogout();\n\t\treturn <Redirect to='/'/>;\n\t} else {\n\t\treturn <Component/>;\n\t}\n}\n\n// Only allows a component to render if the proper role is stored\nconst withRole = (Component, role) => {\n\tconst storedRole = window.localStorage.getItem(\"role\");\n\tif (storedRole !== role) {\n\t\treturn null\n\t} else {\n\t\treturn <Component/>;\n\t}\n}\n\n\n// Returns date obj for the date that is \"days ago\" number of days ago\n//from today's date\n//. E.g. if daysAgo equals 3 the date string will be the date \n// three days ago. If daysAgo = 0 the string is today's date.\nfunction getEarlierDate(daysAgo) {\n    if (daysAgo < 0) {\n      console.error(\"Expected daysAgo to be a value >= 0 but recieved \", daysAgo);\n      daysAgo = -daysAgo;\n    }\n    var earlierDate = new Date();\n    earlierDate.setDate(earlierDate.getDate() - daysAgo);\n    return earlierDate;\n}\n\n//Returns date obj for previous sunday from given date\n//(or the date itself if the date falls on a sunday)\nfunction getPrevSunday(date) {\n    var offset = date.getDay();\n    date.setDate(date.getDate() - offset);\n    return date;\n}\n\n//Returns date obj for following saturday from given date\n//(or the date itself if the date falls on a saturday)\nfunction getNextSaturday(date) {\n    var offset = 6 - date.getDay();\n    date.setDate(date.getDate() + offset);\n    return date;\n}\n\n// Creates a date string of the form yyyy-mm-dd for the date\nfunction dateToString(date){\n    var dateString = date.getFullYear().toString() + \"-\" + (date.getMonth()+1).toString() + \"-\" + date.getDate().toString();\n    return dateString;\n}\n\nexport { domain, downloadReportsCSV, downloadAttendanceCSV, compareActivities, httpPost, httpPatch, httpGet, httpDelete, checkCredentials, history, withRole, getEarlierDate, getPrevSunday, getNextSaturday, dateToString }\n","import React from 'react';\nimport { Alert, Button, ControlLabel, FormControl, FormGroup, Well } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nimport { domain } from '../components/Helpers';\n\nclass Login extends React.Component {\n\n    constructor(props) {\n\t\tsuper(props)\n\t\t\n        this.state = {\n\t\t\tusername: \"\",\n            password:\"\",\n            error: false,\n            firstLogin: true\n\t\t}\n\t\t\n\t\tthis.onUsernameChange = this.onUsernameChange.bind(this);\n        this.onPasswordChange = this.onPasswordChange.bind(this);\n        this.submit = this.submit.bind(this);\n    }\n\n    componentDidMount() {\n        if (localStorage.getItem('loggedIn') != null) {\n            this.setState({firstLogin: false});\n        }\n    }\n\n    onUsernameChange(e) {\n\t\tthis.setState({username: e.target.value})\n\t}\n\n\tonPasswordChange(e) {\n\t\tthis.setState({password: e.target.value})\n    }\n\n    submit(e) {\n        e.preventDefault();\n        // Submit username and password to backend\n        fetch(`https://${domain}/api-token-auth/`, {\n            method: \"POST\", \n            headers:{'Content-Type':'application/json'}, \n            body: JSON.stringify({username: this.state.username, password: this.state.password})\n        }).then(response => {\n            if (response.status >= 400) {\n                // If we get a negative response, display some sort of error and wipe the fields.\n                this.setState({error: true, username: \"\", password: \"\"});\n            } else {\n                response.json().then(result => {\n                    // Store token in browser\n                    window.localStorage.setItem(\"key_credentials\", result.token);\n                    // Store permissions in browser\n                    window.localStorage.setItem(\"permissions\", result.permissions);\n                    // Flag that we've logged in before\n                    window.localStorage.setItem(\"loggedIn\", 'true');\n                    this.props.history.push(`/attendance`);\n                })\n            }\n        });\n    }\n\n    render() {\n        const centerStyle={'textAlign':'center'}\n        const token = window.localStorage.getItem(\"key_credentials\");\n        if (token !== null) {\n            return (<Redirect to='/attendance'/>);\n        } else {\n            return (\n                <div className='center'>\n                    <div className='login-container'>\n                        <Well>\n                            <h2 style={centerStyle}>Key Attendance</h2>\n                                <h4 style={centerStyle}>Sign In</h4>\n                                    <form onSubmit={e => this.submit(e)}>\n                                        <FormGroup>\n                                            <ControlLabel>Username</ControlLabel>\n                                            <FormControl\n                                                type=\"text\"\n                                                value={this.state.username}\n                                                placeholder=\"Username\"\n                                                onChange={this.onUsernameChange}\n                                            />\n                                            <br/>\n                                            <ControlLabel>Password</ControlLabel>\n                                            <FormControl\n                                                type=\"password\"\n                                                value={this.state.password}\n                                                placeholder='Password'\n                                                 onChange={this.onPasswordChange}\n                                             />\n                                        </FormGroup>\n                                        <Button block type=\"submit\" bsStyle=\"primary\">Continue</Button>\n                                        <br/>\n                                        {this.state.error && <Alert bsStyle='danger'>Invalid username or password. Please try again.</Alert>}\n                                        {!this.state.firstLogin && <Alert bsStyle='info'>You have been logged out.</Alert>}\n                                    </form>\n                                </Well>\n                            </div>\n                        </div> \n            );\n        }\n    }\n}\n\nexport default Login;","import React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\n\nclass ActivityCheckbox extends Component {\n    state = {\n        isChecked: false,\n        value: '',\n        activityType: ''\n    };\n\n    componentDidMount() {\n        this.setState({ isChecked: this.props.checked, value: this.props.value, activityType: this.props.activityType});\n    }\n\n    componentDidUpdate() {\n        if (this.props.checked !== this.state.isChecked) {\n            this.setState({ isChecked: this.props.checked, value: this.props.value, activityType: this.props.activityType });\n        }\n    }\n\n    // Handles checked/unchecked state of checkbox\n    toggleCheckboxChange = () => {\n        const { toggleCheckbox, label } = this.props;\n        toggleCheckbox(this.state.isChecked, label, this.state.value, this.state.activityType)\n    };\n\n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n    render() {\n        const { label } = this.props;\n        const { isChecked, value, activityType } = this.state;\n\n        let checkbox = <span className=\"checkbox\">\n            <label>\n                <input\n                    type=\"checkbox\"\n                    value={label}\n                    checked={isChecked}\n                    onChange={this.toggleCheckboxChange}\n                />\n                {label}\n            </label>\n        </span>;\n\n        if (activityType === 'boolean') {\n            return (<span className=\"checkbox\">\n                {checkbox}\n            </span>)\n        } else{\n            let input;\n            if (activityType === 'string') {\n                input = <input\n                    type=\"text\"\n                    value={value}\n                    name=\"value\"\n                    disabled = {isChecked}\n                    onChange={this.handleChange}\n                />\n            } else {\n                input = <input\n                    type=\"number\"\n                    value={value}\n                    disabled = {isChecked}\n                    name=\"value\"\n                    onChange={this.handleChange}\n                />\n            }\n            return (\n                <span className=\"checkbox\">\n                    {checkbox}\n                    {input}\n                </span>\n            )\n        }\n\n    }\n}\n\nActivityCheckbox.propTypes = {\n    label: PropTypes.string.isRequired,\n    toggleCheckbox: PropTypes.func.isRequired\n};\n\nexport default ActivityCheckbox;\n","import React from 'react';\nimport ActivityCheckbox from'./ActivityCheckbox.js'\nimport { Label } from 'react-bootstrap';\nimport { httpDelete, httpPost, domain } from './Helpers';\n\nclass ActivityCheckboxes extends React.Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            activities: {},\n            studentID: 0,\n            error: \"\",\n            numChecked: 0,\n            date: ''\n        }\n\n        this.toggleCheckbox = this.toggleCheckbox.bind(this)\n    }\n\n    componentDidMount() {\n        let numChecked = 0;\n        const activities = this.props.row['activities']\n        const keys = Object.keys(activities);\n        for (let i = 0; i < keys.length; i++) {\n            if (activities[keys[i]].type === 'boolean') {\n                if (activities[keys[i]].value === true) {\n                    numChecked++;\n                }\n            } else {\n                if (activities[keys[i]].value !== '') {\n                    numChecked++;\n                }\n            }\n        }\n\n        this.setState({\n            activities: activities,\n            studentID: this.props.row.studentID,\n            numChecked: numChecked,\n            date: this.props.row.date\n        });\n    }\n\n    // Makes sure that the checkbox reflects whether it has been selected\n    toggleCheckbox = (isChecked, label, value, type) => {\n        const { activities, studentID, numChecked, date } = this.state;\n        var self = this; // This is a cheap hack so the .then() function can have access to state\n\n        // Get attendanceItemID, studentID, activityID from activities\n        const activityID = activities[label].activityID\n        const attendanceItemID = activities[label].attendanceItemID\n\n        // Carry out API actions\n        if (!isChecked) {\n            // Add attendanceItem to database\n            const today = new Date();\n            let body = {\n                \"student_id\": studentID,\n                \"activity_id\": activityID,\n                \"date\":`${date}`,\n                \"time\":`${today.getHours()}:${today.getMinutes() >= 10 ? today.getMinutes() : `0${today.getMinutes()}`}:${today.getSeconds() >= 10 ? today.getSeconds() : `0${today.getSeconds()}`}`,\n            };\n            if (type === 'string') {\n                if (value === '') {\n                    return; // do not post if value is blank\n                }\n                body[\"str_value\"] = value;\n            } else if (type === 'float') {\n                if (value === '') {\n                    return; // do not post if value is blank\n                }\n                body[\"num_value\"] = value;\n            }\n            httpPost(`https://${domain}/api/attendance/`, body)\n            .then(function(result) {\n                // Update state to refresh checkboxes\n                if ('error' in result) {\n                    self.setState({error: result.error})\n                } else {\n                    if (type === 'boolean') {\n                        activities[label].value = true;\n                    } else if (type === 'string') {\n                        activities[label].value = result.str_value;\n                    } else if (type === 'float') {\n                        activities[label].value = result.num_value;\n                    }\n                    activities[label].attendanceItemID = result.id;\n                    self.setState({activities: activities, numChecked: numChecked + 1})\n                }\n            });\n        } else {\n            // Remove attendanceItem from the database\n            if (numChecked === 1) {\n                // We're trying to uncheck the last checkbox\n                // show some sort of visual error??\n            } else {\n                httpDelete(`https://${domain}/api/attendance/?key=${attendanceItemID}`).then(function(result) {\n                    if ('error' in result) {\n                        self.setState({error: result.error})\n                    } else {\n                        if (type === 'boolean') {\n                            activities[label].value = false;\n                        } else {\n                            activities[label].value = '';\n                        }\n                        self.setState({activities: activities, numChecked: numChecked - 1})\n                    }\n                });\n            }\n        }\n    }\n\n    // Creates a checkbox for each activity\n    createCheckboxes = () => {\n        const { activities } = this.state;\n        const keys = Object.keys(activities);\n        var boxes = [];\n        for (var i = 0; i < keys.length; i++) {\n            const type = activities[keys[i]].type;\n            const value = activities[keys[i]].value;\n            let checked;\n            if (type === 'boolean') {\n                checked = value;\n            } else {\n                checked = value !== ''\n            }\n            boxes.push(\n                <ActivityCheckbox\n                    label={keys[i]}\n                    key={keys[i]}\n                    activityType={type}\n                    value={value}\n                    checked = {checked}\n                    toggleCheckbox={this.toggleCheckbox}\n                />\n            )\n        }\n        return boxes;\n    };\n\n    render() {\n        return (\n            <span className=\"container\">\n                <span className=\"row\">\n                    <span className=\"col-sm-12\">\n                        {this.state.numChecked < 2 && <Label bsStyle=\"warning\">At least one box must be checked</Label>}\n                        {this.state.error !== \"\" && <Label bsStyle=\"danger\">Error {this.state.error}: Your changes have not been saved. Please refresh and try again.</Label>}\n                        {this.createCheckboxes()}\n                    </span>\n                </span>\n            </span>\n        );\n    }\n}\n\nexport default ActivityCheckboxes;\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { httpDelete, domain } from './Helpers';\n\nclass AttendanceOptions extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n        }\n\n        this.deleteRow = this.deleteRow.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            row: this.props.row,\n        });\n    }\n\n    componentDidUpdate() {\n        if (this.props.row['studentID'] !== this.state.row['studentID']) {\n            this.setState({\n                row: this.props.row,\n            })\n        }\n    }\n\n    deleteRow() {\n        const { row } = this.state;\n        const activities = row['activities']\n        const keys = Object.keys(activities);\n        let ids = [];\n\n        // figure out what to delete\n        for (let i = 0; i < keys.length; i++) {\n            if (activities[keys[i]].attendanceItemID !== 0) {\n                ids.push(activities[keys[i]].attendanceItemID)\n            }\n        }\n\n        // delete the things\n        for (let i = 0; i < ids.length; i++) {\n            httpDelete(`https://${domain}/api/attendance/?key=${ids[i]}`);\n        }\n\n        this.props.CustomFunction(row['studentID']);\n    }\n\n    render() {\n        return(\n            <Button bsStyle=\"danger\" onClick={this.deleteRow}>Delete</Button>\n        )\n    }\n}\n\nexport default AttendanceOptions;\n","import React from 'react';\nimport { Button, ControlLabel, FormControl, FormGroup, Modal } from 'react-bootstrap';\nimport { httpPost, domain } from './Helpers';\n\nclass AddStudentModal extends React.Component {\n    \n    constructor(props) {\n\t\tsuper(props)\n\t\t\n        this.state = {\n\t\t\tfirstName: \"\",\n\t\t\tlastName:\"\",\n\t\t\tshow: false,\n\t\t\tstudentFields: {},\n\t\t\tstudentInfo: {},\n\t\t}\n\t\t\n\t\tthis.cancel = this.cancel.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n\t\tthis.onFirstNameChange = this.onFirstNameChange.bind(this);\n\t\tthis.onLastNameChange = this.onLastNameChange.bind(this);\n\t\tthis.handleInfoChange = this.handleInfoChange.bind(this);\n\t}\n\n\tcomponentDidUpdate() {\n        if (this.props.show !== this.state.show) {\n\t\t\tlet studentInfo = {};\n\t\t\tconst fieldsList = this.props.studentFields;\n\t\t\tlet studentFields = {};\n\t\t\tfor (var index in fieldsList) {\n\t\t\t\tstudentInfo[fieldsList[index].name] = '';\n\t\t\t\tstudentFields[fieldsList[index].name] = fieldsList[index];\n\t\t\t}\n            this.setState({\n\t\t\t\tshow: this.props.show,\n\t\t\t\tstudentFields: studentFields,\n\t\t\t\tstudentInfo: studentInfo,\n\t\t\t});\n        }\n    }\n\n\tvalidateInput() {\n\t\tconst { firstName, lastName } = this.state;\n\t\tif (firstName.length > 0 && lastName.length > 0) {\n\t\t\treturn 'success';\n\t\t} else if (firstName.length === 0 && lastName.length === 0) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn 'error';\n\t\t}\n\t}\n\n\tonFirstNameChange(e) {\n\t\tthis.setState({firstName: e.target.value})\n\t}\n\n\tonLastNameChange(e) {\n\t\tthis.setState({lastName: e.target.value})\n\t}\n\t\n\tcancel() {\n\t\tthis.setState({\n\t\t\tfirstName: \"\",\n\t\t\tlastName:\"\",\n\t\t});\n\t\tthis.props.onSubmit();\n\t}\n\n\tcreateStudentInfo(name, value, student_id, self) {\n\t\tconst {studentFields} = self.state;\n\t\tconst field = studentFields[name];\n\t\tlet body = {student_id: student_id, info_id: field.info_id};\n\t\tif (field.type === 'str') {\n\t\t\tbody['str_value'] = value;\n\t\t} else if (field.type === 'int') {\n\t\t\tbody['int_value'] = value;\n\t\t} else if (field.type === 'date') {\n\t\t\tbody['date_value'] = value;\n\t\t}\n\t\treturn body;\n\t}\n\n\tsubmit() {\n\t\tconst self = this;\n\t\thttpPost(`https://${domain}/api/students/`, {\n\t\t\tfirst_name: this.state.firstName,\n\t\t\tlast_name: this.state.lastName\n\t\t}).then(function(result) {\n\t\t\tif ('error' in result) {\n\t\t\t\tconsole.log(result);\n\t\t\t} else {\n\t\t\t\tconst student_id = result.id;\n\t\t\t\tconst {studentInfo} = self.state;\n\t\t\t\tlet infoBody = [];\n\t\t\t\tfor (var field in studentInfo) {\n\t\t\t\t\tif (studentInfo[field] !== '') {\n\t\t\t\t\t\tinfoBody.push(self.createStudentInfo(field, studentInfo[field], student_id, self));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\thttpPost(`https://${domain}/api/student_info/`, infoBody)\n\t\t\t\t\t.then(function (infoResult) {\n\t\t\t\t\t\tif ('error' in infoResult) {\n\t\t\t\t\t\t\tconsole.log(infoResult);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.setState({\n\t\t\t\t\t\t\t\tfirstName: \"\",\n\t\t\t\t\t\t\t\tlastName: \"\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tself.props.onSubmit(result);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\tcreateStudentInfoFields () {\n\t\tlet info = [];\n\t\tconst { studentFields } = this.state;\n\t\tfor (var fieldName in studentFields) {\n\t\t\tconst field = studentFields[fieldName];\n\t\t\tlet type;\n\t\t\tswitch (field.type) {\n\t\t\t\tcase 'str':\n\t\t\t\t\ttype = \"text\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'int':\n\t\t\t\t\ttype = \"int\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'date':\n\t\t\t\t\ttype = \"date\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tinfo.push(<div  key={field.info_id}><ControlLabel>{fieldName}</ControlLabel><FormControl value={this.state.studentInfo[fieldName]} name={fieldName} type={type} onChange={this.handleInfoChange} /><br/></div>);\n\t\t}\n\t\treturn info;\n\t}\n\n\thandleInfoChange = e => {\n        const name = e.target.name;\n\t\tconst value = e.target.value;\n\t\tlet { studentInfo } = this.state;\n\t\tstudentInfo[name] = value;\n        this.setState({\n\t\t\tstudentInfo\n        });\n    };\n\n    render() {\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Create New Student</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<FormGroup\n\t\t\t\t\t\t\tcontrolId=\"addStudentForm\"\n\t\t\t\t\t\t\tvalidationState={this.validateInput()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ControlLabel>First Name</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={this.state.firstName}\n\t\t\t\t\t\t\t\tplaceholder=\"First\"\n\t\t\t\t\t\t\t\tonChange={this.onFirstNameChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<ControlLabel>Last Name</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={this.state.lastName}\n\t\t\t\t\t\t\t\tplaceholder=\"Last\"\n\t\t\t\t\t\t\t\tonChange={this.onLastNameChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t{this.createStudentInfoFields()}\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button onClick={this.cancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.submit} bsStyle=\"primary\">Create</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default AddStudentModal;\n","/*\n *  https://alligator.io/react/react-autocomplete/\n */\n\nimport React, { Component, Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./Autocomplete.css\"\nimport { Form, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\n\nclass Autocomplete extends Component {\n  static propTypes = {\n    suggestions: PropTypes.instanceOf(Array),\n    handler: PropTypes.instanceOf(Function)\n  };\n\n  static defaultProps = {\n    suggestions: [],\n    handler: null\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // The active selection's index\n      activeSuggestion: 0,\n      // The suggestions that match the user's input\n      filteredSuggestions: [],\n      // Whether or not the suggestion list is shown\n      showSuggestions: false,\n      // What the user has entered\n      userInput: \"\"\n    };\n  }\n\n  // Event fired when the input value is changed\n  onChange = e => {\n    const { suggestions } = this.props;\n    const userInput = e.currentTarget.value;\n\n    // Filter our suggestions that don't contain the user's input\n    const filteredSuggestions = suggestions.filter(\n      suggestion =>\n        (suggestion.firstName.toLowerCase().startsWith(userInput.toLowerCase()) === true ||\n          suggestion.lastName1.toLowerCase().startsWith(userInput.toLowerCase()) === true ||\n          suggestion.lastName2.toLowerCase().startsWith(userInput.toLowerCase()) === true ||\n          (suggestion.firstName.toLowerCase() + \" \" +\n            suggestion.lastName1.toLowerCase() + \" \").startsWith(userInput.toLowerCase()) === true ||\n            (suggestion.username && suggestion.username.toLowerCase().startsWith(userInput.toLowerCase()) === true))\n    );\n\n    // Update the user input and filtered suggestions, reset the active\n    // suggestion and make sure the suggestions are shown\n    this.setState({\n      activeSuggestion: 0,\n      filteredSuggestions,\n      showSuggestions: true,\n      userInput: e.currentTarget.value,\n    });\n  };\n\n  // Event fired when the user clicks on a suggestion\n  onClick = e => {\n    // Update the user input and reset the rest of the state\n    this.setState({\n      activeSuggestion: 0,\n      filteredSuggestions: [],\n      showSuggestions: false,\n      userInput: e.currentTarget.innerText\n    });\n    this.props.handler(e, e._targetInst.key);\n    this.setState({ userInput: \"\" });\n  };\n\n  // Prevents React's form from overriding our code when hitting enter\n  handleSubmit = e => {\n    e.preventDefault();\n  }\n\n  // Event fired when the user presses a key down\n  onKeyDown = e => {\n    const { activeSuggestion, filteredSuggestions } = this.state;\n\n    // User pressed the enter key, update the input and close the\n    // suggestions\n    if (e.keyCode === 13 && this.state.activeSuggestion === -1) {\n      this.props.handler(e, this.state.selectedId)\n      this.setState({ userInput: \"\" });\n    }\n    else if (e.keyCode === 13) {\n      if (typeof filteredSuggestions[activeSuggestion] === 'object') {\n        var fullName = (filteredSuggestions[activeSuggestion].firstName + \" \" +\n          filteredSuggestions[activeSuggestion].lastName1)\n        this.setState({\n          activeSuggestion: -1,\n          showSuggestions: false,\n          userInput: fullName,\n          selectedId: filteredSuggestions[activeSuggestion].id\n        });\n      }\n\n    }\n    // User pressed the up arrow, decrement the index\n    else if (e.keyCode === 38) {\n      if (activeSuggestion === 0) {\n        return;\n      }\n\n      this.setState({ activeSuggestion: activeSuggestion - 1 });\n      this.scrollUpHandler();\n    }\n    // User pressed the down arrow, increment the index\n    else if (e.keyCode === 40) {\n      if (activeSuggestion === filteredSuggestions.length - 1) {  // Improvements should be made\n        return;\n      }\n\n      this.setState({ activeSuggestion: activeSuggestion + 1 });\n      this.scrollDownHandler();\n    }\n  };\n\n  //temp fix for autoscroll when user presss down arrow through dropdown menu\n  scrollDownHandler() {\n    var dropdown = document.getElementsByClassName(\"suggestions\");\n    var activeItem = document.getElementsByClassName(\"suggestion-active\");\n    var itemHeight = activeItem[0].getBoundingClientRect().height;\n    var scrollPos = dropdown[0].scrollTop;\n    var dropdownHeight = dropdown[0].getBoundingClientRect().height;\n    var halfway = Math.round(Math.round(dropdownHeight / itemHeight) / 2) * itemHeight;\n    if (((this.state.activeSuggestion + 2) * itemHeight) >= scrollPos + dropdownHeight) {\n      dropdown[0].scrollTop = dropdown[0].scrollTop + halfway;\n    }\n  }\n\n  //temp fix for autoscroll when user presss up arrow through dropdown menu\n  scrollUpHandler() {\n    var dropdown = document.getElementsByClassName(\"suggestions\");\n    var activeItem = document.getElementsByClassName(\"suggestion-active\");\n    var itemHeight = activeItem[0].getBoundingClientRect().height;\n    var scrollPos = dropdown[0].scrollTop;\n    var dropdownHeight = dropdown[0].getBoundingClientRect().height;\n    var halfway = Math.round(Math.round(dropdownHeight / itemHeight) / 2) * itemHeight;\n    if (((this.state.activeSuggestion - 1) * itemHeight) <= scrollPos) {\n      dropdown[0].scrollTop = dropdown[0].scrollTop - halfway;\n    }\n  }\n\n  render() {\n    const {\n      onChange,\n      onClick,\n      onKeyDown,\n      handleSubmit,\n      state: {\n        activeSuggestion,\n        filteredSuggestions,\n        showSuggestions,\n        userInput\n      }\n    } = this;\n\n    let suggestionsListComponent;\n\n    if (showSuggestions && userInput) {\n      if (filteredSuggestions.length) {\n        suggestionsListComponent = (\n          <div className=\"suggestions\">\n            {filteredSuggestions.map((suggestion, index) => {\n              let className;\n\n              // Flag the active suggestion with a class\n              if (index === activeSuggestion) {\n                className = \"suggestion-active\";\n              }\n              let username = '';\n              if (suggestion.username) {\n                username = ' | ' + suggestion.username;\n              }\n              return (\n                <p\n                  className={className}\n                  key={suggestion.id}\n                  onClick={onClick}\n                >\n                  {suggestion.firstName} {suggestion.lastName1} {suggestion.lastName2} {username}\n                </p>\n              );\n            })}\n          </div>\n        );\n      } else {\n        suggestionsListComponent = (\n          <div className=\"no-suggestions\">\n            <em>No suggestions.</em>\n          </div>\n        );\n      }\n    }\n\n    return (\n      <Fragment>\n        <Form inline\n          onSubmit={handleSubmit}>\n          <FormGroup\n            controlId=\"formInlineName\"\n          >\n            <ControlLabel>Search:</ControlLabel>{' '}\n            <FormControl\n              autoComplete=\"off\"\n              type=\"text\"\n              value={userInput}\n              onChange={onChange}\n              onKeyDown={onKeyDown}\n              placeholder={this.props.hasUsername ? 'Name or Username' : 'Name'}\n            />\n            {suggestionsListComponent}\n          </FormGroup>{' '}\n        </Form>\n      </Fragment>\n    );\n  }\n}\n\nexport default Autocomplete;\n","import React from 'react';\nimport ReactCollapsingTable from 'react-collapsing-table';\nimport ActivityCheckboxes from '../components/ActivityCheckboxes';\nimport AttendanceOptions from '../components/AttendanceOptions';\nimport AddStudentModal from '../components/AddStudentModal';\nimport Autocomplete from \"../components/Autocomplete\";\nimport { httpPost, httpGet, domain } from '../components/Helpers';\nimport { Button, ButtonToolbar, Form, FormControl, FormGroup, ControlLabel } from 'react-bootstrap';\nimport { downloadAttendanceCSV, compareActivities } from '../components/Helpers';\nimport { Redirect } from 'react-router-dom';\n\nclass Attendance extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            buildingCSV: false,\n            students: [],\n            activities: [],\n            attendanceItems: [],\n            suggestionsArray: [],\n            attendance: [],\n            showStudentModal: false,\n            date: '',\n            prevDate: ''\n        }\n\n        this.downloadCSV = this.downloadCSV.bind(this);\n        this.addStudent = this.addStudent.bind(this);\n        this.removeAttendanceRow = this.removeAttendanceRow.bind(this);\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.updateDate = this.updateDate.bind(this);\n        this.setDateToToday = this.setDateToToday.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({date: this.getCurrentDate()})\n    }\n\n    componentDidUpdate() {\n        if (this.state.date !== this.state.prevDate) {\n            this.setState({prevDate: this.state.date})\n            this.fetchAndBuild()\n        }\n    }\n\n    getCurrentDate() {\n        const today = new Date();\n        const month = today.getMonth() + 1;\n        const day = today.getDate();\n        return `${today.getFullYear()}-${month >= 10 ? month : `0${month}`}-${day >= 10 ? day : `0${day}`}`\n    }\n\n    async fetchAndBuild() {\n        const { date } = this.state;\n        try {\n\n            const students = await httpGet(`https://${domain}/api/students/`);\n            const attendanceItems = await httpGet(`https://${domain}/api/attendance/?day=${date}`);\n            let activities = await httpGet(`https://${domain}/api/activities/`);\n            const studentFields = await httpGet(`https://${domain}/api/student_column/?quick_add=True`)\n            activities = activities.filter(item => item.is_showing === true);\n            activities.sort(compareActivities)\n            const suggestions = this.makeSuggestionsArray(students);\n\n            this.setState({\n                suggestionsArray: suggestions,\n                students: students,\n                activities: activities,\n                studentFields : studentFields,\n                attendanceItems: attendanceItems\n            });\n        } catch (e) {\n            console.log(e);\n        }\n        this.buildSheet();\n    }\n\n    buildSheet() {\n        const { activities, attendanceItems, students } = this.state;\n        // Combine attendance items. Need to sort by student id.\n        var entries = {};\n        for (var i = 0; i < attendanceItems.length; i++) {\n            if (attendanceItems[i].activity_id === -1) {\n                continue;\n            }\n            if (entries[`${attendanceItems[i].student_id}`] == null) {\n                entries[`${attendanceItems[i].student_id}`] = {'time':attendanceItems[i].time};\n            }\n            let value = true;\n            if (attendanceItems[i].num_value !== null) {\n                value = attendanceItems[i].num_value;\n            } else if (attendanceItems[i].str_value !== null) {\n                value = attendanceItems[i].str_value;\n            }\n            entries[`${attendanceItems[i].student_id}`][attendanceItems[i].activity_id] = {'value':value, 'itemID':attendanceItems[i].id};\n        }\n\n        // Build table of the form [{name, activity1, ... , activityn, time}]\n        var sheet = [];\n        const ids = Object.keys(entries);\n        var columns = ['Name'];\n        for (var i = 0; i < activities.length; i++) {\n            columns.push(activities[i].name);\n        }\n        for (var i = 0; i < ids.length; i++) {\n            var row = {}\n            // match student data to current id\n            for (var j = 0; j < students.length; j++) { // unfortunately, student data isn't in any particular order. O(n) it is!\n                if (students[j].id === parseInt(ids[i])) {\n                    row['name'] = `${students[j].first_name} ${students[j].last_name}`;\n                    row['studentID'] = students[j].id;\n                    break;\n                }\n            } \n            row['time'] = entries[ids[i]].time;\n            row['activities'] = {};\n            // fill in activities data\n            for (var j = 0; j < activities.length; j++) {\n                let value;\n                if (!entries[ids[i]][activities[j].activity_id]) {\n                    if (activities[j].type === 'boolean') {\n                        value = false;\n                    } else {\n                        value = '';\n                    }\n                } else {\n                    value = entries[ids[i]][activities[j].activity_id].value;\n                }\n                row['activities'][activities[j].name] = {\n                    'value': value,\n                    'activityID': activities[j].activity_id,\n                    'type': activities[j].type,\n                    'attendanceItemID': (entries[ids[i]][activities[j].activity_id]) ? entries[ids[i]][activities[j].activity_id].itemID : 0,\n                }\n            }\n            sheet.push(row)\n        }\n\n        this.setState({ attendance: sheet });\n    }\n\n    addStudent(e, studentID) {\n        const { students, attendance, activities, date } = this.state;\n        const today = new Date();\n        const self = this;\n\n        // make sure we don't already have this student.\n        for (let i = 0; i < attendance.length; i++) {\n            if (parseInt(studentID) === attendance[i].studentID) {\n                return;\n            }\n        }\n\n        httpPost(`https://${domain}/api/attendance/`, {\n            \"student_id\": studentID,\n            \"activity_id\": 7, // Key    \n            \"date\":`${date}`,\n            \"time\":`${today.getHours()}:${today.getMinutes() >= 10 ? today.getMinutes() : `0${today.getMinutes()}`}:${today.getSeconds() >= 10 ? today.getSeconds() : `0${today.getSeconds()}`}`,\n        }).then(function(result) {\n            // Add new row to table\n            let name = \"\";\n            for (var j = 0; j < students.length; j++) {\n                if (students[j].id === parseInt(studentID)) {\n                    name = `${students[j].first_name} ${students[j].last_name}`;\n                    break;\n                }\n            } \n\n            let activityList = {};\n            for (var j = 0; j < activities.length; j++) {\n                const type = activities[j].type;\n                const value = type === 'boolean' ? false : '';\n                activityList[activities[j].name] = {\n                    'activityID': activities[j].activity_id,\n                    'attendanceItemID': 0,\n                    'value': value,\n                    'type': type\n                }\n            }\n            activityList['Key']['value'] = true;\n            activityList['Key']['attendanceItemID'] = result.id;\n\n            const row = {'name': name, 'studentID': parseInt(studentID), 'time': result.time, 'activities':activityList};\n            attendance.push(row);\n            self.setState({attendance: attendance});\n        });\n    }\n\n    makeSuggestionsArray(suggestions) {\n        var array = [];\n        var lastHolder1;\n        var lastHolder2;\n        var tempArray;\n        for (var object in suggestions) {\n            if (suggestions[object]['last_name'].includes(\" \")) {\n                tempArray = suggestions[object]['last_name'].split(\" \");\n                lastHolder1 = tempArray[0];\n                lastHolder2 = tempArray[1];\n            }\n            else {\n                lastHolder1 = suggestions[object]['last_name'];\n                lastHolder2 = \"\";\n            }\n            array.push({\n                firstName: suggestions[object]['first_name'],\n                lastName1: lastHolder1,\n                lastName2: lastHolder2,\n                id: suggestions[object]['id']\n            });\n        }\n        return array;\n    }\n\n    async downloadCSV() {\n        this.setState({ buildingCSV: true });\n        await downloadAttendanceCSV(`${this.state.date}`)\n        this.setState({ buildingCSV: false });\n    }\n\n    // Allows the AttendanceOptions object to  update state here\n    removeAttendanceRow(studentID) {\n        const { attendance } = this.state;\n        for (let i = 0; i < attendance.length; i++) {\n            if (attendance[i].studentID === studentID) {\n                attendance.splice(i, 1);\n            }\n        }\n        this.setState({attendance: attendance});\n    }\n\n    openModal() {\n        this.setState({showStudentModal: true});\n    }\n\n    closeModal(student=null) {\n        const { students } = this.state;\n        let suggestions = []\n\n        if (student !== null) {\n            // First, add student to students list\n            students.push({'first_name': student.first_name, 'last_name': student.last_name, 'id': student.id});\n            suggestions = this.makeSuggestionsArray(students);\n            // Then, add student to the array.\n            this.addStudent(null, student.id);\n        }\n\n        this.setState({showStudentModal: false, students: students, suggestions: suggestions});\n    }\n\n    updateDate(e) {\n        this.setState({date: e.target.value});\n    }\n\n    setDateToToday() {\n        this.setState({date: this.getCurrentDate()})\n    }\n\n    render() {\n        let permissions = window.localStorage.getItem('permissions').split(',')\n        if (permissions.indexOf('view_attendanceitems') < 0) {\n            return (<Redirect to='/attendance'/>);\n        }\n        const rows = this.state.attendance.map(item =>\n            (\n               {\n                   name: item.name,\n                   time: item.time,\n                   activities: item.activities,\n                   studentID: item.studentID,\n                   date: this.state.date\n               }\n           )\n        ).sort((a, b) => {\n            return b.time.localeCompare(a.time); // For some reason the table doesn't automatically sort.\n        });\n\n        const columns = [\n            {\n                accessor: 'name',\n                label: 'Name',\n                priorityLevel: 1,\n                position: 1,\n                minWidth: 100,\n                sortable: true\n            },\n            {\n                accessor: 'time',\n                label: 'Check-in Time',\n                priorityLevel: 2,\n                position: 2,\n                minWidth: 100,\n                sortable: true\n            },\n            {\n                accessor: 'options',\n                label: 'Options',\n                priorityLevel: 3,\n                position: 3,\n                CustomComponent: AttendanceOptions,\n                sortable: false,\n                minWidth: 100\n            },\n            { \n                accessor: 'activities',\n                label: 'Activities',\n                priorityLevel: 4,\n                position: 4,\n                minWidth: 2000,\n                CustomComponent: ActivityCheckboxes,\n                sortable: false, \n            }\n        ];\n\n        const buildingCSV = this.state.buildingCSV;\n\n        return (\n            <div className='content'>\n                <AddStudentModal studentFields={this.state.studentFields} show={this.state.showStudentModal} onSubmit={this.closeModal}/>\n                <h1>Attendance for {this.state.date}</h1>\n                <br/>\n                <ButtonToolbar style={{ float: 'right'}}>\n                    <Button onClick={this.setDateToToday}>Go To Today</Button>\n                    <Button onClick={this.downloadCSV} disabled={buildingCSV}>{buildingCSV ? 'Downloading...' : 'Download'}</Button>\n                    <Button onClick={this.openModal}>New Student</Button> \n                </ButtonToolbar>\n                <Form inline style={{ float: 'right', paddingRight: '5px', paddingLeft: '5px'}}>\n                    <FormGroup>\n                        <ControlLabel>Date:</ControlLabel>{' '}\n                        <FormControl onChange={this.updateDate} value={this.state.date} type=\"date\"/>\n                    </FormGroup>\n                </Form>\n                <Autocomplete\n\t\t\t\t\tsuggestions={this.state.suggestionsArray}\n\t\t\t\t\thandler={this.addStudent}\n\t\t\t\t/>\n                <br/>\n                <ReactCollapsingTable\n                        rows = { rows }\n                        columns = { columns }\n                        column = {'time'}\n                        direction = {'descending'}\n                        showPagination={ true }\n                        callbacks = {{'options':this.removeAttendanceRow}}\n                />\n            </div>\n        )\n    }\n}\n\nexport default Attendance;","// Copyright (c) 2016 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component} from 'react';\nimport PropTypes from \"prop-types\";\nimport { scaleLinear } from 'd3-scale';\n\nimport { XYPlot, XAxis, YAxis, HeatmapSeries, LabelSeries, MarkSeries } from 'react-vis';\nimport ContinuousColorLegend from 'react-vis/dist/legends/continuous-color-legend';\nimport \"./React-vizLegends.scss\";\n\nclass Heatmap extends Component {\n\n  static propTypes = {\n    heatMapJson: PropTypes.instanceOf(Array),\n  };\n\n  static defaultProps = {\n    data: [],\n      heatMapType: \"\"\n\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: props.data,\n        // yArray is used for the reports Heatmaps and yArrayStudents is used for students heatmap\n        yArrayStudents: [\"1\", \"2\", \"3\", \"4\", \"5\"]\n    };\n  }\n\n  // Sets the correct range for the y-axis depending on what day the data starts on\n    // This assumes the range length will always be exactly one week\n  setYArrayRange(data) {\n      try {\n          if (data[0][\"y\"] === \"Thu\") {\n              return [\"Thu\", \"Fri\", \"Sat\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", ]\n          }\n          else if (data[0][\"y\"] === \"Fri\") {\n              return [\"Fri\", \"Sat\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", ]\n          }\n          else if (data[0][\"y\"] === \"Sat\") {\n              return [\"Sat\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", ]\n          }\n          else if (data[0][\"y\"] === \"Sun\") {\n              return [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", ]\n          }\n          else if (data[0][\"y\"] === \"Mon\") {\n              return [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\", ]\n          }\n          else if (data[0][\"y\"] === \"Tue\") {\n              return [\"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\", \"Mon\",]\n          }\n          else if (data[0][\"y\"] === \"Wed\") {\n              return [\"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\", \"Mon\", \"Tue\", ]\n          }\n      }\n      catch(err) {\n          console.log(err);\n      }\n\n\n  };\n\n  scaleWidth(heatMapType, dataLength) {\n    if (heatMapType === \"weekly\" || heatMapType === \"individualStudent\") {\n      return 8*dataLength;\n    }\n    else if (heatMapType === \"annual\") {\n      return 3.2*dataLength;\n    }\n  }\n\n  scaleHeight(heatMapType) {\n      if (heatMapType === \"weekly\" || heatMapType === \"individualStudent\") {\n          return 300;\n      }\n      else if (heatMapType === \"annual\") {\n          return 350;\n      }\n  }\n\n  axisType(heatMapType) {\n      return \"ordinal\";\n  }\n\n  colorRange(data, heatMapType) {\n      for (var i=0; i<data.length; i++) {\n          if ((heatMapType === \"individualStudent\"  && data[i][\"color\"] !== 0) ||\n              ((heatMapType === \"weekly\" || heatMapType === \"annual\" ) && data[i][\"color\"] !== 0)) {\n              return [\"#F5FBFD\", \"teal\"]\n          }\n      }\n      return [\"#F5FBFD\", \"#F5FBFD\"];\n  }\n\n  // Returns the correct y-axis dependent on heatmap type, with axes label reversed\n  reverseYAxis(heatMapType, yArray) {\n      if (heatMapType !== \"individualStudent\") {\n          try {\n              return yArray.map(x => x).reverse();\n          }\n          catch (err) {\n              console.log(err);\n          }\n      }\n      else {\n          return this.state.yArrayStudents.map(x=>x).reverse();\n      }\n\n  }\n\n  calculateMinDataPoint(data){\n    var min = 0;\n    var toCompare;\n    for(var i=0; i<data.length;i++){\n      toCompare = data[i][\"color\"];\n      if(toCompare && (toCompare < min)){\n        min = toCompare;\n      }\n    }\n    return min;\n  }\n\n  calculateMaxDataPoint(data){\n    var max = 0;\n    var toCompare;\n    for(var i=0; i<data.length;i++){\n      toCompare = data[i][\"color\"];\n      if(toCompare && (toCompare > max)){\n        max = toCompare;\n      }\n    }\n    return max;\n  }\n\n  calculateHeatmapColor(maxHeatMapColor){\n    if(maxHeatMapColor==0){\n      return \"#F5FBFD\";\n    } else {\n      return \"teal\";\n    }\n  }\n\n  render() {\n    const data = this.props.data;\n    const dataLength = data.length;\n    const heatMapType = this.props.heatMapType;\n    const minLegendLabel = this.calculateMinDataPoint(data);\n    const maxLegendLabel = this.calculateMaxDataPoint(data);\n    const maxHeatMapColor = this.calculateHeatmapColor(maxLegendLabel);\n    const heatMapColors = this.colorRange(maxLegendLabel)\n    const yArray = this.setYArrayRange(data);\n\n\n    return (\n      <div>\n        <div style={{margin:20}}>\n      <XYPlot\n        width={this.scaleWidth(heatMapType, dataLength)}\n        height={this.scaleHeight(heatMapType)}\n        margin={{top: 30, left: 45}}\n        xType=\"ordinal\"\n        yType={this.axisType(heatMapType)}\n        yDomain={this.reverseYAxis(heatMapType, yArray)}\n        >\n        <XAxis orientation='top'/>\n        <YAxis orientation='left'/>\n\n        <HeatmapSeries\n            className=\"heatmap-series-example\"\n            colorRange = {this.colorRange(data, heatMapType)}\n              data={data}\n              style={{\n                stroke: 'black',\n                strokeWidth: '1px',\n                rectStyle: {\n                  rx: 1,\n                  ry: 1\n                }\n              }} />\n\n      </XYPlot>\n      </div>\n\n      <ContinuousColorLegend\n      width={300}\n      startTitle={minLegendLabel}\n      midTitle={Math.round((maxLegendLabel+minLegendLabel)/2)}\n      endTitle= {maxLegendLabel}\n      startColor=\"#F5FBFD\"\n      endColor={maxHeatMapColor}\n      height={100}\n      />\n</div>\n      \n    );\n  };\n}\n\nexport default Heatmap;","import React, { Component } from 'react';\nimport Autocomplete from '../components/Autocomplete';\nimport Heatmap from '../components/Heatmap';\nimport { Button, ButtonToolbar, Col, Form, FormGroup, FormControl, Label, ListGroup, ListGroupItem, Row } from \"react-bootstrap\";\nimport { httpGet, httpPatch, httpPost, httpDelete, domain, getEarlierDate, getPrevSunday, getNextSaturday, dateToString } from '../components/Helpers';\nimport blankPic from '../images/blank_profile_pic.jpg'\nimport { Redirect } from 'react-router-dom';\n\nclass Students extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      mode: 'search',\n    };\n    this.display = this.display.bind(this);\n    this.edit = this.edit.bind(this);\n    this.handler = this.handler.bind(this);\n  }\n\n  async componentDidMount() {\n    try {\n      var studentsJson = await httpGet(`https://${domain}/api/students/`);\n      var suggestionsArray = this.makeSuggestionsArray(studentsJson);\n      \n      var studentColumnJson = await httpGet(`https://${domain}/api/student_column/`);\n      var profileInfo = this.parseCols(studentColumnJson);\n      var profileInfoPrelim = this.parseCols(studentColumnJson);\n\n      this.setState(function (previousState, currentProps) {\n        return {\n          mode: 'search',\n          suggestionsArray: suggestionsArray,\n          studentColumnJson: studentColumnJson,\n          profileInfo: profileInfo,\n          profileInfoPrelim: profileInfoPrelim,\n          id: null,\n\n          uploadedPic: false\n        };\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  makeSuggestionsArray(suggestions) {\n    var array = [];\n    var lastHolder1;\n    var lastHolder2;\n    var tempArray;\n    for (var object in suggestions) {\n      if (suggestions[object]['last_name'].includes(\" \")) {\n        tempArray = suggestions[object]['last_name'].split(\" \");\n        lastHolder1 = tempArray[0];\n        lastHolder2 = tempArray[1];\n      }\n      else {\n        lastHolder1 = suggestions[object]['last_name'];\n        lastHolder2 = \"\";\n      }\n      array.push({\n        firstName: suggestions[object]['first_name'],\n        lastName1: lastHolder1,\n        lastName2: lastHolder2,\n        id: suggestions[object]['id']\n      });\n    }\n    return array;\n  }\n\n  parseCols(cols) {\n    cols.sort(this.sortCols);\n    \n    var profileInfo = [];\n    for (var col in cols) {\n      profileInfo[col] = {\n        studentInfoId: null,\n        colInfo: cols[col],\n        value: null,\n        type: null,\n        updated: false,\n        patchPost: {\n          'student_id': null,\n          'info_id': parseInt(col) + 1,\n          'int_value': null,\n          'str_value': null,\n          'bool_value': null,\n          'date_value': null,\n          'time_value': null,\n          'id': null\n        }\n      }\n    }\n\n    return profileInfo;\n  }\n  \n  // Could be used to create a custom layout for the fields on the student profile page\n  sortCols(a, b) {\n    if (a.info_id > b.info_id) return 1;\n    if (a.info_id < b.info_id) return -1;\n    return 0;\n  }\n\n  handler(e, studentId) {\n    var preState = {\n      mode: 'display',\n      id: studentId,\n      profileInfo: this.state.profileInfo,\n      profileInfoPrelim: this.state.profileInfoPrelim\n    };\n    this.getStudentProfile(preState);\n  }\n\n  async getStudentProfile(state) {\n    try {\n      const studentProfileJson = await httpGet(`https://${domain}/api/students/?id=` + state.id);\n      state.profileData = studentProfileJson;\n      // Deep copy\n      state.profileDataPrelim = JSON.parse(JSON.stringify(studentProfileJson));\n      \n      try {\n        const studentInfoJson = await httpGet('http://127.0.0.1:8000/api/student_info?student_id=' + state.id);\n\n        if (studentInfoJson.length == 0) {\n          var studentColumnJson = await httpGet('http://127.0.0.1:8000/api/student_column');\n          state.profileInfo = this.parseCols(studentColumnJson);\n          state.profileInfoPrelim = this.parseCols(studentColumnJson);\n          state = this.addTypes(state);\n        } else {\n          var studentColumnJson = await httpGet('http://127.0.0.1:8000/api/student_column');\n          state.profileInfo = this.parseCols(studentColumnJson);\n          state.profileInfoPrelim = this.parseCols(studentColumnJson);\n          state = this.addTypes(state);\n\n          var returnedState = this.parseStudentInfo(state, studentInfoJson);\n          state.profileInfo = returnedState.profileInfo;\n          state.profileInfoPrelim = returnedState.profileInfoPrelim;\n        }\n      } \n      catch (e) {\n        var studentColumnJson = await httpGet(`https://${domain}/api/student_column/`);\n        state.profileInfo = this.parseCols(studentColumnJson);\n      }\n\n      var startDate = getEarlierDate(30);\n      startDate = getPrevSunday(startDate);\n      //var startDateString = dateToString(startDate);\n      var startDateString = \"2018-01-28\";\n      state.startDateString = startDateString;\n      var today = getEarlierDate(0);\n      var endDate = getNextSaturday(today);\n      //var endDateString = dateToString(endDate);\n      var endDateString = \"2018-03-03\";\n      state.endDateString = endDateString;\n\n      const heatMapJson = await httpGet(`https://${domain}/api/reports/individualHeatmap/?student_id=` + state.id + '&startdate=' + startDateString + '&enddate=' + endDateString);\n      state.heatMapJson = heatMapJson;\n\n      this.setState(function (previousState, currentProps) {\n        return state;\n      });\n    }\n    catch (e) {\n      console.log(e);\n    }\n  }\n\n  async updateStudentInfo() {\n    const studentInfoJson = await httpGet(`https://${domain}/api/student_info?student_id=` + this.state.id);\n    var returnedState = this.parseStudentInfo(this.state, studentInfoJson);\n\n    this.setState(function (previousState, currentProps) {\n      return {\n        profileInfo: returnedState.profileInfo,\n        profileInfoPrelim: returnedState.profileInfoPrelim\n      };\n    });\n  }\n\n  addTypes(state) {\n    for (var entry in state.profileInfo) {\n      state.profileInfo[entry].patchPost.student_id = state.id;\n      state.profileInfoPrelim[entry].patchPost.student_id = state.id;\n\n      // Ensure all varchar(x) types get caught as str_value\n      var type;\n      if ((/varchar.*/g).test(state.profileInfo[entry].colInfo.type)) {\n        state.profileInfo[entry].type = 'str_value';\n        state.profileInfoPrelim[entry].type = 'str_value';\n      } else {\n        state.profileInfo[entry].type = state.profileInfo[entry].colInfo.type + '_value';\n        state.profileInfoPrelim[entry].type = state.profileInfo[entry].colInfo.type + '_value';\n      }\n    }\n    return state;\n  }\n\n  parseStudentInfo(state, info) {\n    for (var entry in state.profileInfo) {\n      state.profileInfo[entry].patchPost.student_id = state.id;\n      state.profileInfoPrelim[entry].patchPost.student_id = state.id;\n\n      var type;\n      if ((/varchar.*/g).test(state.profileInfo[entry].colInfo.type)) {\n        state.profileInfo[entry].type = 'str_value';\n        state.profileInfoPrelim[entry].type = 'str_value';\n      } else {\n        state.profileInfo[entry].type = state.profileInfo[entry].colInfo.type + '_value';\n        state.profileInfoPrelim[entry].type = state.profileInfo[entry].colInfo.type + '_value';\n      }\n    }\n\n    for (var item in info) {\n      var infoId = info[item].info_id;\n      state.profileInfo[infoId - 1].patchPost = info[item];\n      state.profileInfoPrelim[infoId - 1].patchPost = info[item];\n\n      state.profileInfo[infoId - 1].studentInfoId = info[item].id;\n      state.profileInfoPrelim[infoId - 1].studentInfoId = info[item].id;\n\n      type = state.profileInfo[infoId - 1].type;\n      state.profileInfo[infoId - 1].value = info[item][type];\n      state.profileInfoPrelim[infoId - 1].value = info[item][type];\n    }\n\n    return state;\n  }\n\n  search() {\n    var preState = {\n      mode: 'search',\n      id: this.state.id,\n      profileInfo: this.state.profileInfo,\n      profileInfoPrelim: this.state.profileInfoPrelim\n    };\n    this.getStudentProfile(preState);\n  }\n\n  display() {\n    var preState = {\n      mode: 'display',\n      id: this.state.id,\n      profileInfo: this.state.profileInfo,\n      profileInfoPrelim: this.state.profileInfoPrelim\n    };\n    this.getStudentProfile(preState);\n  }\n\n  edit() {\n    this.setState({ mode: 'edit' });\n  }\n  \n  async delete(evt, state) {\n    evt.preventDefault();\n\n    // Ensure we have studentInfoIds from the most recent POSTs\n    var newState = {\n      mode: 'search',\n      id: this.state.id,\n      profileInfo: this.state.profileInfo,\n      profileInfoPrelim: this.state.profileInfoPrelim\n    };\n\n    try {\n      const studentInfoJson = await httpGet('http://127.0.0.1:8000/api/student_info?student_id=' + state.id);\n\n      if (studentInfoJson.length == 0) {\n        var studentColumnJson = await httpGet('http://127.0.0.1:8000/api/student_column');\n        newState.profileInfo = this.parseCols(studentColumnJson);\n        newState = this.addTypes(newState);\n      } else {\n        var studentColumnJson = await httpGet('http://127.0.0.1:8000/api/student_column');\n        newState.profileInfo = this.parseCols(studentColumnJson);\n        newState = this.addTypes(newState);\n\n        var returnednewState = this.parseStudentInfo(newState, studentInfoJson);\n        newState.profileInfo = returnednewState.profileInfo;\n      }\n    } \n    catch (e) {\n      var studentColumnJson = await httpGet('http://127.0.0.1:8000/api/student_column');\n      newState.profileInfo = this.parseCols(studentColumnJson);\n    }\n\n    httpDelete('http://127.0.0.1:8000/api/students/', state.profileData);\n    \n    for (var field in newState.profileInfo) {\n      var field = newState.profileInfo[field];\n      if (field.studentInfoId) {\n        httpDelete('http://127.0.0.1:8000/api/student_info/?id=' + field.studentInfoId, field.patchPost);\n      } else {\n        console.log(field);\n      }\n    }\n\n    // Ensure that the autocomplete removes the entry\n    var entryFound = false;\n    var entryIndex = 0;\n    while (entryFound === false) {\n      if (state.suggestionsArray[entryIndex].id === state.profileData['id']) {\n        state.suggestionsArray.splice(entryIndex, 1);\n        entryFound = true\n      } else {\n        entryIndex++;\n      }\n    }\n    \n    this.state.mode = 'search';\n    this.setState(function (previousState, currentProps) {\n      return state;\n    });\n  }\n\n  handleNameChange(evt, state) {\n    var changedField = evt.target.id;\n    state.profileDataPrelim[changedField] = evt.target.value;\n    state.profileDataUpdated = true;\n    this.setState(function (previousState, currentProps) {\n      return state;\n    });\n  }\n\n  handleInfoChange(evt, state) {\n    var changedField = parseInt(evt.target.id);\n    \n    var newValue = evt.target.value;\n    var type = state.profileInfoPrelim[changedField].type;\n\n    state.profileInfoPrelim[changedField].updated = true;\n\n    // Ensure that empty strings are parsed as null values\n    if (newValue === '') {\n      newValue = null;\n    }\n\n    state.profileInfoPrelim[changedField].value = newValue;\n    state.profileInfoPrelim[changedField].patchPost[type] = newValue;\n\n    this.setState(function (previousState, currentProps) {\n      return state;\n    });\n  }\n\n  handleSubmit(evt, state) {\n    evt.preventDefault();\n    \n    // Deep copy\n    state.profileInfo = JSON.parse(JSON.stringify(state.profileInfoPrelim));\n\n    if (state.profileDataUpdated) {\n      state.profileData = JSON.parse(JSON.stringify(state.profileDataPrelim));\n      httpPatch(`http://${domain}/api/students/`, state.profileData);\n    }\n    var posted = false;\n    for (var field in state.profileInfo) {\n      var field = state.profileInfo[field];\n      if (field.updated) {\n        if (field.studentInfoId) {\n          httpPatch(`http://${domain}/api/student_info/?id=` + field.studentInfoId, field.patchPost);\n        } else {\n          httpPost(`http://${domain}/api/student_info/`, field.patchPost);\n          posted = true;\n        }\n      }\n    }\n\n    if (posted) {\n      this.updateStudentInfo();\n    }\n\n    // Ensure that the autocomplete component has an updated copy of the profile\n    var entryFound = false;\n    var entryIndex = 0;\n    while (entryFound === false) {\n      if (state.suggestionsArray[entryIndex].id === state.profileData['id']) {\n        state.suggestionsArray[entryIndex] = {\n          firstName: state.profileData['first_name'],\n          id: state.profileData['id'],\n          lastName1: state.profileData['last_name'],\n          lastName2: ''\n        };\n        entryFound = true\n      } else {\n        entryIndex++;\n      }\n    }\n\n    state.id = state.profileData.id;\n    state.mode = 'display';\n\n    this.setState(function (previousState, currentProps) {\n      return state;\n    });\n  }\n\n  sameDay(d1, d2) {\n    return d1.getFullYear() === d2.getFullYear() &&\n      d1.getMonth() === d2.getMonth() &&\n      d1.getDate() === d2.getDate();\n  }\n\n  compareTime(time1, time2) {\n    return new Date(time1) > new Date(time2); // true if time1 is later\n  }\n\n  formatData(state) {\n    //replace hyphens in date string with slashes b/c javascript Date object requires this (weird)\n    var studentId = state.id;\n    var startDateString = state.startDateString;\n    var endDateString = state.endDateString;\n    // var startDateString = \"2018-01-03\";\n    //var endDateString = \"2018-01-31\";\n    var startDate = new Date(startDateString.replace(/-/g, '\\/'));\n    var endDate = new Date(endDateString.replace(/-/g, '\\/'));\n    var dateToCompare = startDate;\n    var currEntryDate;\n    var currIdx = 0;\n    var heatMapJson = this.state.heatMapJson;\n\n    if (heatMapJson.length === 0) {\n      var firstEntry = { \"date\": startDateString, \"daily_visits\": 0 }\n      heatMapJson.push(firstEntry);\n    }\n    //Add dummy date entries for missing dates (dates with no engagements) to json btwn start and end date\n    //dateToCompare always incremented by 1\n    while (this.compareTime(dateToCompare, endDate) === false) {\n      //if reached the end of json but there's still dates to fill in up to the end date, stay on end entry\n      if (currIdx > heatMapJson.length - 1) {\n        currIdx = heatMapJson.length - 1;\n      }\n      currEntryDate = new Date(heatMapJson[currIdx][\"date\"].replace(/-/g, '\\/'));\n      //identified missing date, so add dummy date entry for missing date\n      if (this.sameDay(dateToCompare, currEntryDate) === false) {\n        var dateEntryZeroEngagements = { \"date\": dateToCompare.toISOString().slice(0, 10), \"daily_visits\": 0 };\n        //add entry in place if not at end of json OR final date entry has not been added yet/surpassed\n        //else add to very end of json \n        if (currIdx !== heatMapJson.length - 1 || this.compareTime(currEntryDate, dateToCompare)) {\n          heatMapJson.splice(currIdx, 0, dateEntryZeroEngagements);\n        } else {\n          heatMapJson.splice(currIdx + 1, 0, dateEntryZeroEngagements);\n        }\n      }\n      dateToCompare.setDate(dateToCompare.getDate() + 1);\n      currIdx++;\n     }\n  \n      //Time to convert updated JSON with missing dates added in into\n    //a list called processedData of {\"x\": integer day of week, \"y\": integer week # of month, \"color\": int num engagements per day} objs\n    var processedData = [];\n    var dayOfWeek, weekNum, dayEntry;\n    var currDateObj;\n    var mdyArray;\n    var m, d, y;\n    var strDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    for (var i = 0; i < heatMapJson.length; i++) {\n      currDateObj = new Date(heatMapJson[i]['date'].replace(/-/g, '\\/'));\n      dayOfWeek = strDays[currDateObj.getDay()];\n      weekNum = Math.floor(i / 7);\n      mdyArray = heatMapJson[i]['date'].split(/\\s*\\-\\s*/g);\n      y = mdyArray[0];\n      m = mdyArray[1];\n      d = mdyArray[2];\n      dayEntry = { \"x\": dayOfWeek, \"y\": (weekNum+1).toString(), \"color\": heatMapJson[i]['daily_visits']};\n      processedData.push(dayEntry);\n     }\n     return processedData;\n   }\n\n  renderDisplayInfo = () => {\n    let info = [];\n    \n    var fields = this.state.profileInfo;\n    for (var field in fields) {\n      if (fields[field].colInfo.is_showing === true) {\n        var value = 'N/A';\n        if (fields[field].value !== null && fields[field].value != null != '') {\n          value = fields[field].value;\n        }\n        var innerHtml = fields[field].colInfo.name + ': ' + value;\n        info.push(<ListGroupItem key={field}>{innerHtml}</ListGroupItem>);\n      }\n    }\n\n    return info;\n  }\n\n  renderEditInfo = () => {\n    let info = [];\n\n    for (var entry in this.state.profileInfo) {\n      var label = this.state.profileInfo[entry].colInfo.name + ': ';\n      if (this.state.profileInfo[entry].colInfo.is_showing) {\n        info.push(<Label key={entry + 'label'}>{label}</Label>)\n\n        var type = this.state.profileInfo[entry].colInfo.type;\n        // var type;\n        // switch (this.state.profileInfo[entry].type) {\n        //   case 'str_value':\n        //   type = \"text\";\n        //   break;\n        //   case 'int_value':\n        //   type = \"int\";\n        //   break;\n        //   case 'date_value':\n        //   type = \"date\";\n        //   break;\n        //   case 'time_value':\n        //   type = \"time\";\n        //   break;\n        // }\n        \n        info.push(<FormControl key={label} type={type} id={entry} defaultValue={this.state.profileInfo[entry].value} onChange={evt => this.handleInfoChange(evt, this.state)} />);\n        info.push(<br key={entry + 'break'}/>);\n      }\n    }\n    return info;\n  }\n\n  readImage(evt, state) {\n    evt.preventDefault();\n\n    var reader = new FileReader();\n    reader.onloadend = () => {\n      this.state.profileInfo[5].updated = true;\n      this.state.profileInfo[5].patchPost['blob_value'] = reader.result;\n      this.setState(function (previousState, currentProps) {\n        return {\n          src: reader.result,\n          uploadedPic: true\n        };\n      });\n    }\n    reader.readAsDataURL(evt.target.files[0]);\n  }\n\n  render() {\n    let permissions = window.localStorage.getItem('permissions').split(',')\n    if (permissions.indexOf('view_students') < 0) {\n      return (<Redirect to='/attendance' />);\n    }\n    if (this.state.mode === 'search') {\n      return (\n        <div className='content'>\n          <h1> Key Students </h1>\n          <div className='container-fluid no-padding'>\n            <div className='row justify-content-start'>\n              <div className='col-md-12 to-front top-bottom-padding'>\n                <Autocomplete\n                  suggestions={this.state.suggestionsArray}\n                  handler={this.handler}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    else if (this.state.mode === 'display') {\n      var pic;\n      if (this.state.uploadedPic) {\n        pic = this.state.src;\n      } else {\n        pic = blankPic;\n      }\n      return (\n        <div className='content'>\n          <h1> Student Profile </h1>\n          <div className='container-fluid no-padding'>\n            <div className='row justify-content-start'>\n              <div className='col-md-4 to-front top-bottom-padding'>\n                <Autocomplete\n                  suggestions={this.state.suggestionsArray}\n                  handler={this.handler}\n                />\n              </div>\n            </div>\n          </div>\n          <br/>\n          <br/>\n          <br/>\n          <br/>\n          <br/>\n          <br/>\n          <br/>\n          <div className='container-fluid no-padding'>\n            <div className='row justify-content-start'> \n              <div className='col-md-2 to-front top-bottom-padding'>\n                {/* <img id=\"studentPhoto\" src={pic} width=\"196\" height=\"196\" /><br /> */}\n                <ListGroup>\n                  <ListGroupItem>Name: {this.state.profileData.first_name} {this.state.profileData.last_name}</ListGroupItem>\n                  {this.renderDisplayInfo(this.state.parsedInfo)}\n                </ListGroup>\n                <Button variant=\"btn btn-primary\" onClick={this.edit}>\n                  Edit\n                </Button>\n\t\t\t  </div>\n        \t</div>\n\t\t  </div>\n          <h3>Student Attendance</h3>\n          <p>Number of engagements for this individual student in the past month.</p>\n          <Heatmap \n            data = {this.formatData(this.state)} heatMapType = \"individualStudent\"/>\n\t\t</div>\n      );\n    }\n    else if (this.state.mode === 'edit') {\n      return (\n        <div className='content'>\n          <h1> Student Profile </h1>\n          <div className='container-fluid no-padding'>\n            <div className='row justify-content-start'>\n              <div className='col-md-4 to-front top-bottom-padding'>\n                <Autocomplete\n                  suggestions={this.state.suggestionsArray}\n                  handler={this.handler}\n                />\n              </div>\n              <div className='col-md-8 top-bottom-padding'>\n                {/* <img id=\"studentPhoto\" src={blankPic} width=\"196\" height=\"196\" /> */}\n                {/* <p> Upload Student Profile Photo </p> */}\n                {/* <input id=\"upload-button\" type=\"file\" accept=\"image/*\" name={this.state.profileInfo[0].patchPost.student_id} onChange={evt => this.readImage(evt, this.state)} /><br /> */}\n                <Form inline className='col-md-8 top-bottom-padding' onSubmit={evt => this.handleSubmit(evt, this.state)}>\n                  <FormGroup>\n                    <Label>First Name: </Label>\n                    {/* <Col sm=\"10\"> */}\n                      <FormControl type=\"text\" id=\"first_name\" defaultValue={this.state.profileData.first_name} onChange={evt => this.handleNameChange(evt, this.state)} /> <br/>\n                    {/* </Col> */}\n                    <Label>Last Name: </Label>\n                    {/* <Col sm=\"10\"> */}\n                      <FormControl type=\"text\" id=\"last_name\" defaultValue={this.state.profileData.last_name} onChange={evt => this.handleNameChange(evt, this.state)} /> <br/>\n                    {/* </Col> */}\n                    {this.renderEditInfo(this.state.parsedInfo)}\n                    <br/>\n                    <ButtonToolbar>\n                      <Button bsStyle=\"default\" onClick={this.display}>Cancel</Button>\n                      <Button bsStyle=\"primary\" type=\"submit\">Submit</Button>\n                    </ButtonToolbar>\n                    <br />\n                    <ButtonToolbar>\n                      <Button bsStyle=\"danger\" onClick={evt => { if (window.confirm('Are you sure you wish to delete this user?')) this.delete(evt, this.state) }}>Delete</Button>\n                    </ButtonToolbar>\n                  </FormGroup>\n                </Form>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default Students;\n","// BarChart.js\nimport React from 'react';\nimport {\n    XYPlot,\n    XAxis, // Shows the values on x axis\n    YAxis, // Shows the values on y axis\n    VerticalBarSeries,\n    LabelSeries\n} from 'react-vis';\nimport PropTypes from \"prop-types\";\nclass BarChart extends React.Component {\n\n    static propTypes = {\n        barChartJson: PropTypes.instanceOf(Array),\n    };\n\n    static defaultProps = {\n        data: [],\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            data: props.data\n        };\n    }\n    render() {\n        const data = this.props.data;\n        const chartWidth = 400;\n        const chartHeight = 350;\n        const chartDomain = [0, 350];\n        return (\n            <XYPlot\n                xType=\"ordinal\"\n                width={chartWidth}\n                height={chartHeight}\n                yDomain={chartDomain}\n            >\n                <XAxis />\n                <YAxis />\n                <VerticalBarSeries\n                    data={data}\n                />\n                <LabelSeries\n                    data={data.map(obj => {\n                        return { ...obj, label: obj.y.toString() }\n                    })}\n                    labelAnchorX=\"middle\"\n                    labelAnchorY=\"text-after-edge\"\n                />\n            </XYPlot>\n        );\n    }\n}\nexport default BarChart;","import React, {Component} from 'react';\nimport Heatmap from '../components/Heatmap';\nimport continuousColorLegend from 'react-vis/dist/legends/continuous-color-legend';\nimport {getEarlierDate, getPrevSunday, getNextSaturday, dateToString,downloadReportsCSV, domain, httpGet, httpPatch} from '../components/Helpers';\nimport BarChart from './../components/BarChart.js'\nimport { Button, ButtonToolbar } from 'react-bootstrap';\n\nclass Reports extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            startDateStringWeek: \"\",\n            endDateStringWeek: \"\",\n            startDateStringYear: \"\",\n            endDateStringYear: \"\",\n            byHourJson: [],\n            byHourJsonForDownload: [],\n            byDayJson: [],\n            byDayJsonForDownload: [],\n            byDayHeatMap: []\n        };\n        this.downloadHourlyCSV = this.downloadHourlyCSV.bind(this);\n        this.downloadWeeklyCSV = this.downloadWeeklyCSV.bind(this);\n        this.downloadYearlyCSV = this.downloadYearlyCSV.bind(this);\n      }\n\n      async componentDidMount() {\n        try {\n          //hardcoded date range for testing\n          var startDateStringWeek = \"2018-02-08\";\n          var endDateStringWeek = \"2018-02-14\";\n          //Make timerange for last 7 days to display for weekly aggregation (broken down by hour of day)\n          var today = getEarlierDate(0);\n          //var startDateWeek = getEarlierDate(6);\n          //var startDateStringWeek = dateToString(startDateWeek);\n          //var endDateStringWeek = dateToString(today);\n          const byHourJson = await httpGet('http://127.0.0.1:8000/api/reports/byHourAttendance/?startdate=' + startDateStringWeek + '&enddate=' + endDateStringWeek);\n          console.log(\"By hour:\",byHourJson);\n          // var byHourJson = await byHourAttendanceData.json();\n          //Make timerange for last 365 days, extending back to the preceeding sunday and forward to the following sat to display yearly aggregation (broken down by day)\n         // var startDateYear= getEarlierDate(365);\n         // startDateYear = getPrevSunday(startDateYear);\n          //var startDateStringYear = dateToString(startDateYear);\n         // var endDateYear = getNextSaturday(today);\n          //var endDateStringYear = dateToString(endDateYear);\n          var startDateStringYear = \"2018-02-04\";\n          var endDateStringYear = \"2019-02-09\";\n          const byDayJson = await httpGet('http://127.0.0.1:8000/api/reports/byDayAttendance/?startdate=' + startDateStringYear + '&enddate=' + endDateStringYear);\n          // var byDayJson = await byDayAttendanceData.json();\n          var dayData = await this.formatDayData(byDayJson, startDateStringYear, endDateStringYear);\n          var hourData = await this.formatHourData(byHourJson, startDateStringWeek, endDateStringWeek);\n\n\n          //Delete this block later, this is just here for testing\n          // var dayData = this.formatDayData(this.state);\n          // console.log(\"processed day of year data after setting state: \", this.state.byDayJson);\n          // var hourData = this.formatHourData(this.state);\n          // console.log(\"processed hour of week data: \", hourData);\n\n        } catch (e) {\n          console.log(e);\n        }\n      }\n      downloadHourlyCSV() {\n        this.setState({ buildingCSV: true });\n        var title = \"Reports_Hourly_Attendance_\".concat(this.state.startDateStringWeek);\n        title = title.concat(\"_to_\");\n        title = title.concat(this.state.endDateStringWeek);\n        downloadReportsCSV(this.state.byHourJsonForDownload, [\"Date\", \"Hour\", \"# Engagements\"], title);\n        this.setState({ buildingCSV: false });\n      }\n\n      downloadWeeklyCSV() {\n        this.setState({ buildingCSV: true });\n        var title = \"Reports_Daily_Attendance_\".concat(this.state.startDateStringWeek);\n        title = title.concat(\"_to_\");\n        title = title.concat(this.state.endDateStringWeek);\n        downloadReportsCSV(this.state.byDayJsonForDownload.splice(0,7), [\"Date\",\"# Engagements\"], title);\n        this.setState({ buildingCSV: false });\n      }\n\n      downloadYearlyCSV() {\n        this.setState({ buildingCSV: true });\n        var title = \"Reports_Annual_Attendance_\".concat(this.state.startDateStringYear);\n        title = title.concat(\"_to_\");\n        title = title.concat(this.state.endDateStringYear);\n        downloadReportsCSV(this.state.byDayJsonForDownload, [\"Date\", \"# Engagements\"], title);\n        this.setState({ buildingCSV: false });\n      }\n\n      sameDay(d1, d2) {\n        return d1.getFullYear() === d2.getFullYear() &&\n          d1.getMonth() === d2.getMonth() &&\n          d1.getDate() === d2.getDate();\n      }\n\n\n      compareTime(time1, time2) {\n        return new Date(time1) > new Date(time2); // true if time1 is later\n      }\n\n      //Format json data from day-of-yr endpoint into format usable by heatmap (and also add missing entries)\n      formatDayData(state, startDateStringYear, endDateStringYear) {\n        //replace hyphens in date string with slashes b/c javascript Date object requires this (weird)\n        var startDateString = startDateStringYear;\n        var endDateString = endDateStringYear;\n        var startDate = new Date(startDateString.replace(/-/g, '\\/'));\n        var endDate = new Date(endDateString.replace(/-/g, '\\/'));\n        var dateToCompare = startDate;\n        var currEntryDate;\n        var currIdx = 0;\n        var byDayJson = state;\n\n        if(byDayJson.length === 0){\n          var firstEntry = {\"date\": startDateString, \"daily_visits\": 0}\n          byDayJson.push(firstEntry);\n        }\n        //Add dummy date entries for missing dates (dates with no engagements) to json btwn start and end date\n        //dateToCompare always incremented by 1\n        while (this.compareTime(dateToCompare, endDate) === false) {\n          //if reached the end of json but there's still dates to fill in up to the end date, stay on end entry\n          if (currIdx > byDayJson.length - 1) {\n            currIdx = byDayJson.length - 1;\n          }\n          currEntryDate = new Date(byDayJson[currIdx][\"date\"].replace(/-/g, '\\/'));\n          //identified missing date, so add dummy date entry for missing date\n          if (this.sameDay(dateToCompare, currEntryDate) === false) {\n            var dateEntryZeroEngagements = { \"date\": dateToCompare.toISOString().slice(0, 10), \"daily_visits\": 0 };\n            //add entry in place if not at end of json OR final date entry has not been added yet/surpassed\n            //else add to very end of json \n            if (currIdx !== byDayJson.length - 1 || this.compareTime(currEntryDate, dateToCompare)) {\n              byDayJson.splice(currIdx, 0, dateEntryZeroEngagements);\n            } else {\n              byDayJson.splice(currIdx + 1, 0, dateEntryZeroEngagements);\n            }\n          }\n          dateToCompare.setDate(dateToCompare.getDate() + 1);\n          currIdx++;\n        }\n\n        //process json into list of lists and store into state for downloading as csv\n        var byDayJsonForDownload = [];\n        var entryAsList;\n        for(var i=0; i<byDayJson.length; i++){\n          entryAsList = Object.values(byDayJson[i]);\n          byDayJsonForDownload.push(entryAsList);\n        }\n\n        //Time to convert updated JSON with missing dates added in into\n        //a list called processedData of {\"x\": integer day of week, \"y\": integer week # of month, \"color\": int num engagements per day} objs\n        var processedData = [];\n        var processedDataAnnual = [];\n        var dayOfWeek, weekNum, dayEntry, annualHeatMapEntry, dayOfWeekConverted;\n        var currDateObj;\n        var mdyArray;\n        var d, m, y;\n        var strDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n        for (var i = 0; i < byDayJson.length; i++) {\n          currDateObj = new Date(byDayJson[i]['date'].replace(/-/g, '\\/'));\n          dayOfWeek = currDateObj.getDay();\n          dayOfWeekConverted = strDays[dayOfWeek];\n          weekNum = Math.floor(i / 7);\n          mdyArray = byDayJson[i]['date'].split(/\\s*\\-\\s*/g);\n          y = mdyArray[0];\n          m = mdyArray[1];\n          d = mdyArray[2];\n          annualHeatMapEntry = {\"x\": weekNum+1, \"y\": dayOfWeekConverted, \"color\": byDayJson[i]['daily_visits']};\n          processedDataAnnual.push(annualHeatMapEntry);\n          dayEntry = {\"y\": byDayJson[i]['daily_visits'], \"x\": dayOfWeekConverted};\n          processedData.push(dayEntry);\n        }\n          this.setState(function (previousState, currentProps) {\n              return {\n                  startDateStringYear: startDateStringYear,\n                  endDateStringYear : endDateStringYear,\n                  byDayJson : processedData,\n                  byDayJsonForDownload: byDayJsonForDownload,\n                  byDayHeatMap: processedDataAnnual\n\n              };\n          });\n        return processedData;\n      }\n\n      //Format json data from hour-of-week endpoint into format usable by heatmap (and also add missing entries)\n      formatHourData(state, startDateStringWeek, endDateStringWeek) {\n        //replace hyphens in date string with slashes b/c javascript Date object requires this (weird)\n        var startDateString = startDateStringWeek;\n        var endDateString = endDateStringWeek;\n        var startDate = new Date(startDateString.replace(/-/g, '\\/'));\n        var endDate = new Date(endDateString.replace(/-/g, '\\/'));\n        var dateToCompare = startDate;\n        var currEntryDate;\n        var currHour;\n        var currIdx = 0;\n        var byHourJson = state;\n        var hourArray = [\"14:00:00\", \"15:00:00\", \"16:00:00\", \"17:00:00\",\"18:00:00\",\"19:00:00\",\"20:00:00\",\"21:00:00\",\"22:00:00\"];\n\n        //first filter out any entries that have timestamps outside of key operating hours\n        byHourJson = byHourJson.filter(function(entry) {\n          var inValidTimeRange = hourArray.includes(entry.time);\n          return inValidTimeRange === true;\n         });\n        var hourToCompareIdx= 0;\n        var hourToCompare = hourArray[0];\n\n        if(byHourJson.length === 0){\n          var firstEntry = {\"date\": startDateString, \"time\": hourArray[0], \"count\": 0};\n          byHourJson.push(firstEntry);\n        }\n        //Add dummy date entries for missing date-hour combos (no engagements) to json btwn start and end date\n        while (this.compareTime(dateToCompare, endDate) === false) {\n          //if reached the end of json but there's still dates to fill in up to the end date, stay on end entry\n          if (currIdx > byHourJson.length - 1) {\n            currIdx = byHourJson.length - 1;\n          }\n          currEntryDate = new Date(byHourJson[currIdx][\"date\"].replace(/-/g, '\\/'));\n          currHour = byHourJson[currIdx][\"time\"];\n          //identified missing date, so add dummy date entry for missing date\n          if (this.sameDay(dateToCompare, currEntryDate) === false) {\n            var dateEntryZeroEngagements = { \"date\": dateToCompare.toISOString().slice(0, 10), \"time\": hourToCompare, \"count\": 0 };\n            //add entry in place if not at end of json OR final date entry has not been added yet/surpassed\n            //else add to very end of json\n            if (currIdx !== byHourJson.length - 1 || (this.compareTime(currEntryDate, dateToCompare) && currHour > hourToCompare)){\n              byHourJson.splice(currIdx, 0, dateEntryZeroEngagements);\n            } else {\n              byHourJson.splice(currIdx+1,0, dateEntryZeroEngagements);\n            }\n          }\n          //the two date-hour combos are on same day, but different hours so add the missing hour as a dummy entry\n          else if(hourToCompare !== currHour){\n            var dateEntryZeroEngagements = { \"date\": dateToCompare.toISOString().slice(0, 10), \"time\": hourToCompare, \"count\": 0 };\n            //add entry in place if not at end of json OR final date entry has not been added yet/surpassed\n            //else add to very end of json\n            if (currIdx !== byHourJson.length - 1 || (this.compareTime(currEntryDate, dateToCompare) && currHour > hourToCompare)){\n              byHourJson.splice(currIdx, 0, dateEntryZeroEngagements);\n            } else {\n              byHourJson.splice(currIdx+1,0, dateEntryZeroEngagements);\n            }\n          }\n          //the two date-hour combos match exactly\n          currIdx++;\n          if(hourToCompare === hourArray[hourArray.length-1]){\n           hourToCompare = \"next day\";\n          }\n          //on last hour of the current day, increment date and set hour to first hour\n          if(hourToCompare === \"next day\"){\n            dateToCompare.setDate(dateToCompare.getDate() + 1);\n            hourToCompare = hourArray[0];\n            hourToCompareIdx = 0;\n          }\n          //otherwise just increment the hour\n          else{\n            hourToCompareIdx++;\n            hourToCompare = hourArray[hourToCompareIdx];\n          }\n        }\n        \n        //process json into list of lists and store into state for downloading as csv\n        var byHourJsonForDownload = [];\n        var entryAsList;\n        for(var i=0; i<byHourJson.length; i++){\n          entryAsList = Object.values(byHourJson[i]);\n          byHourJsonForDownload.push(entryAsList);\n        }\n\n        //Time to convert updated JSON with missing date-hour combos added in into\n        //a list called processedData of {\"x\": string hour of day, \"y\": string day of week, \"color\": int num engagements per day} objs\n        var processedData = [];\n        var dayOfWeek, hourEntry, hourOfDay;\n        var currDateObj;\n        var mdyArray;\n        var d, m, y;\n        var strDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n        for (var i = 0; i < byHourJson.length; i++) {\n          currDateObj = new Date(byHourJson[i]['date'].replace(/-/g, '\\/'));\n          dayOfWeek = strDays[currDateObj.getDay()];\n          hourOfDay = byHourJson[i]['time'].slice(0,2);\n          mdyArray = byHourJson[i]['date'].split(/\\s*\\-\\s*/g);\n          y = mdyArray[0];\n          m = mdyArray[1];\n          d = mdyArray[2];\n          hourEntry = {\"x\": hourOfDay.concat(\" hrs\"), \"y\": dayOfWeek, \"color\": byHourJson[i]['count']};\n          processedData.push(hourEntry);\n        }\n          this.setState(function (previousState, currentProps) {\n              return {\n                  startDateStringWeek: startDateStringWeek,\n                  endDateStringWeek: endDateStringWeek,\n                  byHourJson: processedData,\n                  byHourJsonForDownload: byHourJsonForDownload\n              };\n          });\n        return processedData;\n      }\n\n    render() {\n        const buildingCSV = this.state.buildingCSV;\n        return (\n            <div className=\"container py-4\">\n                <h1> Reports </h1>\n                <div className=\"row\">\n                    <div className=\"col-md-8 align-self-center\">\n                        <h3> Hourly Attendance </h3>\n                        <p> Number of engagements per hour in the past week.</p>\n                        <ButtonToolbar style={{ float: 'right'}}>\n                    <Button onClick={this.downloadHourlyCSV} disabled={buildingCSV}>{buildingCSV ? 'Downloading...' : 'Download Hourly'}</Button>\n                </ButtonToolbar>\n                        <Heatmap\n                        data = {this.state.byHourJson}\n                        heatMapType = \"weekly\" />\n\n                    </div>\n                    <div className='col-md-4 align-self-center'>\n                        <h3> Daily Attendance </h3>\n                        <p> Number of engagements per day in the past week.</p>\n                        <ButtonToolbar style={{ float: 'right'}}>\n                    <Button onClick={this.downloadWeeklyCSV} disabled={buildingCSV}>{buildingCSV ? 'Downloading...' : 'Download Daily'}</Button>\n                </ButtonToolbar>\n                        <BarChart data = {this.state.byDayJson.slice(0, 7)}/> </div>\n                    </div>\n              <div className=\"row\">\n                <div className=\"col-md-8\">\n                    <h3> Annual Daily Attendance </h3>\n                    <p> Number of engagements per day in the past year.</p>\n                    <ButtonToolbar style={{ float: 'right'}}>\n                          <Button onClick={this.downloadYearlyCSV} disabled={buildingCSV}>{buildingCSV ? 'Downloading...' : 'Download Annual'}</Button>\n                        </ButtonToolbar>\n                  <Heatmap data = {this.state.byDayHeatMap} heatMapType = \"annual\" />\n                </div>\n                 </div>\n            </div>\n\n        );\n    }\n}\n\nexport default Reports;","import React from 'react';\nimport { Alert, Button, ControlLabel, FormControl, FormGroup, Modal } from 'react-bootstrap';\nimport { httpPost, domain } from './Helpers';\n\nclass AddUserModal extends React.Component {\n    \n    constructor(props) {\n\t\tsuper(props)\n\t\t\n        this.state = {\n            username: '',\n            first_name: '',\n            last_name: '',\n            password: '',\n            confirmPassword: '',\n            is_active: true,\n            error: false,\n            backendError: false,\n            radioOptions: [],\n            show: false,\n            selectedOption: ''\n\t\t}\n\t\t\n\t\tthis.cancel = this.cancel.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.validateInput = this.validateInput.bind(this);\n        this.handleActiveCheckbox = this.handleActiveCheckbox.bind(this);\n        this.createRadioOptions = this.createRadioOptions.bind(this);\n    }\n    \n    componentDidUpdate() {\n        if (this.props.show !== this.state.show) {\n            const radioOptions = [];\n            const role_names = Object.keys(this.props.role_ids);\n            for (var index in role_names) {\n                radioOptions.push({label: role_names[index], checked: false})\n            }\n            this.setState({\n                radioOptions: radioOptions,\n                show: this.props.show\n            });\n        }\n    }\n\n\tvalidateInput() {\n\t\tconst { username, password, confirmPassword } = this.state;\n        const regex = /^[a-z0-9.@+\\-_]+$/i;\n        if (username.length > 0 && password.length > 0 && password === confirmPassword \n            && regex.test(username) && this.state.selectedOption) {\n\t\t\treturn 'success';\n\t\t} else if (username.length === 0 && password.length === 0 && confirmPassword.length === 0) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn 'error';\n\t\t}\n    }\n    \n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n    handleActiveCheckbox = e => {\n        this.setState({is_active: !this.state.is_active});\n    }\n\n\tcancel() {\n        this.setState({\n            username: '',\n            first_name: '',\n            last_name: '',\n            password: '',\n            confirmPassword: '',\n            selectedOption: '',\n            is_active: true, \n            error: false, \n            backendError: false\n        });\n        this.props.onSubmit();\n\t}\n\n\tsubmit() {\n        const self = this;\n        self.setState({backendError: false});\n        if (self.validateInput() !== 'success') {\n            self.setState({error: true});\n            return;\n        } else {\n            self.setState({error: false});\n        }\n        const groups = [];\n        groups.push(self.props.role_ids[self.state.selectedOption])\n        const body = {username: self.state.username,\n            password: self.state.password,\n            first_name: self.state.first_name,\n            last_name: self.state.last_name,\n            groups: groups,\n            is_active: self.state.is_active};\n        httpPost(`https://${domain}/api/users/`, body)\n            .then(function (result) {\n                if ('error' in result) {\n                    self.setState({backendError: true});\n                } else {\n                    self.setState({\n                        username: '',\n                        first_name: '',\n                        last_name: '',\n                        password: '',\n                        confirmPassword: '',\n                        selectedOption: '',\n                        is_active: true, \n                        error: false, \n                        backendError: false\n                    });\n                    self.props.onSubmit(result);\n                }\n            })\n    }\n    \n    toggleRadioOptions(index) {\n        const { radioOptions } = this.state;\n        let selectedOption = '';\n        if (!radioOptions[index].checked) {\n            selectedOption = radioOptions[index].label;\n            for (var j in radioOptions) {\n                if (j !== index) {\n                    radioOptions[j].checked = false;\n                } \n            }\n        }\n        radioOptions[index].checked = !radioOptions[index].checked;\n\n        this.setState({\n            selectedOption: selectedOption,\n            radioOptions: radioOptions\n        });\n    }\n    \n    createRadioOptions() {\n        const { radioOptions } = this.state;\n    \n        return radioOptions\n            .map((option, index) =>\n                <div key={index}>\n                    <label>\n                        <input\n                            type=\"radio\"\n                            name=\"userRoles\"\n                            value={option.label}\n                            checked={option.checked}\n                            onChange={this.toggleRadioOptions.bind(this, index)}\n                            className=\"form-check-input\"\n                        />\n                        {option.label}\n                    </label>\n                </div>\n            );\n    }\n\n    render() {\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Create New User</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<FormGroup\n\t\t\t\t\t\t\tvalidationState={this.validateInput()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ControlLabel>Username</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"text\"\n                                name=\"username\"\n\t\t\t\t\t\t\t\tvalue={this.state.username}\n\t\t\t\t\t\t\t\tplaceholder=\"Username\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<br/>\n                            <ControlLabel>First Name</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"text\"\n                                name=\"first_name\"\n\t\t\t\t\t\t\t\tvalue={this.state.first_name}\n\t\t\t\t\t\t\t\tplaceholder=\"First Name\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<br/>\n                            <ControlLabel>Last Name</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"text\"\n                                name=\"last_name\"\n\t\t\t\t\t\t\t\tvalue={this.state.last_name}\n\t\t\t\t\t\t\t\tplaceholder=\"Last Name\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<ControlLabel>Password</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"password\"\n                                name=\"password\"\n\t\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n                            <br />\n                            <ControlLabel>Confirm Password</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"password\"\n                                name=\"confirmPassword\"\n\t\t\t\t\t\t\t\tvalue={this.state.confirmPassword || ''}\n\t\t\t\t\t\t\t\tplaceholder=\"Confirm Password\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n                            <br />\n                            <ControlLabel>Active</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"checkbox\"\n                                checked={this.state.is_active}\n\t\t\t\t\t\t\t\tvalue={this.state.is_active}\n\t\t\t\t\t\t\t\tonChange={this.handleActiveCheckbox}\n\t\t\t\t\t\t\t/>\n                            <ControlLabel>User Roles</ControlLabel>\n                            {this.createRadioOptions()}\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n                    {this.state.error && <Alert bsStyle='danger'>Invalid input. Please check your fields and try again.</Alert>}\n                    {this.state.backendError && <Alert bsStyle='danger'>Server error. Please try again.</Alert>}\n\t\t\t\t\t<Button onClick={this.cancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.submit} bsStyle=\"primary\">Create</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default AddUserModal;\n","import React from 'react';\nimport { Button, Modal, FormGroup, FormControl, ControlLabel, Alert } from 'react-bootstrap';\nimport { httpPatch, httpDelete, domain } from './Helpers';\n\nclass EditUserModal extends React.Component {\n    \n    constructor(props) {\n\t\tsuper(props)\n        this.state = {\n            row: {},\n            show: false,\n            radioOptions: [],\n            selectedOption: '',\n            first_name: '',\n            last_name: '',\n            is_active: true,\n            password: '',\n            confirmPassword: '',\n            editPassword: false,\n            error: false,\n            backendError: false\n\t\t}\n        \n        this.delete = this.delete.bind(this);\n\t\tthis.cancel = this.cancel.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handlePasswordButton = this.handlePasswordButton.bind(this);\n        this.handleActiveCheckbox = this.handleActiveCheckbox.bind(this);\n        this.validateInput = this.validateInput.bind(this);\n        this.createRadioOptions = this.createRadioOptions.bind(this);\n\t}\n\n\tvalidateInput() {\n        const { password, confirmPassword, editPassword } = this.state;\n        if (editPassword) {\n            if (password.length === 0 || password !== confirmPassword) {\n                return 'error';\n            }\n            return 'success';\n        } else {\n\t\t\treturn null;\n\t\t}\n    }\n\n    componentDidUpdate() {\n        if (this.props.row !== this.state.row) {\n            this.setState({\n                row: this.props.row,\n            });\n        }\n        if (this.props.show !== this.state.show) {\n            const radioOptions = [];\n            const role_names = Object.keys(this.props.row.role_ids);\n            const role_ids = this.props.row.role_ids;\n            let selectedOption = '';\n            for (var index in role_names) {\n                const role_name = role_names[index];\n                const checked = this.props.row.groups.indexOf(role_ids[role_name]) > -1;\n                if (checked) {\n                    selectedOption = role_name;\n                }\n                radioOptions.push({label: role_name, checked: checked})\n            }\n            this.setState({\n                radioOptions: radioOptions,\n                selectedOption: selectedOption,\n                show: this.props.show,\n                first_name: this.props.row.first_name,\n                last_name: this.props.row.last_name,\n                is_active: this.props.row.is_active,\n            });\n        }\n    }\n\n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n    handleActiveCheckbox = e => {\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[\"is_active\"] = !this.state.is_active;\n            return newState;\n        });\n    }\n\n    handlePasswordButton = e => {\n        this.setState({\n            editPassword: !this.state.editPassword,\n            password: \"\",\n            confirmPassword: \"\"\n        });\n    }\n\n\tcancel() {\n        this.setState({\n            row: this.props.row,\n            error: false,\n            backendError: false,\n            password: '',\n            confirmPassword: '',\n            editPassword: false,\n        });\n\t\tthis.props.onSubmit();\n    }\n    \n    delete() {\n        const self = this;\n        httpDelete(`https://${domain}/api/users/?id=${self.state.row.id}`)\n        .then(function (result) {\n            if ('error' in result) {\n                self.setState({\n                    backendError: true\n                });\n            } else {\n                self.props.onDelete(self.state.row.id);\n            }\n        });\n    }\n\n\tsubmit() {\n        const self = this;\n        this.setState({\n            backendError: false\n        });\n        if (self.validateInput() === 'error') {\n            this.setState({\n                error: true\n            });\n            return;\n        } else {\n            this.setState({\n                error: false\n            });\n        }\n        let body = {\n            id: self.state.row.id,\n            first_name: self.state.first_name,\n            last_name: self.state.last_name,\n            is_active: self.state.is_active\n        };\n        let groups = [];\n        groups.push(self.props.row.role_ids[self.state.selectedOption])\n        body[\"groups\"] = groups;\n        if (self.state.password !== \"\") {\n            body[\"password\"] = self.state.password;\n        }\n        httpPatch(`https://${domain}/api/users/`, body)\n            .then(function (result) {\n                if ('error' in result) {\n                    self.setState({\n                        backendError: true\n                    });\n                } else {\n                    self.setState({\n                        password: '',\n                        confirmPassword: '',\n                        editPassword: false,\n                    })\n                    self.props.onSubmit(result);\n                }\n            })\n    }\n    \n    toggleRadioOptions(index) {\n        let { radioOptions, selectedOption } = this.state;\n        if (!radioOptions[index].checked) {\n            selectedOption = radioOptions[index].label;\n            for (var j in radioOptions) {\n                if (j !== index) {\n                    radioOptions[j].checked = false;\n                } \n            }\n        }\n        radioOptions[index].checked = !radioOptions[index].checked;\n\n        this.setState({\n            selectedOption: selectedOption,\n            radioOptions: radioOptions\n        });\n    }\n    \n    createRadioOptions() {\n        const { radioOptions } = this.state;\n    \n        return radioOptions\n            .map((option, index) =>\n                <div key={index}>\n                    <label>\n                        <input\n                            type=\"radio\"\n                            name=\"userRoles\"\n                            value={option.label}\n                            checked={option.checked}\n                            onChange={this.toggleRadioOptions.bind(this, index)}\n                            className=\"form-check-input\"\n                        />\n                        {option.label}\n                    </label>\n                </div>\n            );\n    }\n\n    render() {\n        let passwordBlock;\n        if (!this.state.editPassword) {\n            passwordBlock = <Button bsStyle=\"link\" onClick={this.handlePasswordButton}>Change Password</Button>\n        } else {\n            passwordBlock = <div>\n                <ControlLabel>Password</ControlLabel>\n                <FormControl\n                    type=\"password\"\n                    name=\"password\"\n                    value={this.state.password}\n                    placeholder=\"Password\"\n                    onChange={this.handleChange}\n                />\n                <br />\n                <ControlLabel>Confirm Password</ControlLabel>\n                <FormControl\n                    type=\"password\"\n                    name=\"confirmPassword\"\n                    value={this.state.confirmPassword}\n                    placeholder=\"Confirm Password\"\n                    onChange={this.handleChange}\n                />\n                <br />\n                <Button bsStyle=\"warning\" onClick={this.handlePasswordButton}>Discard Password Changes</Button>\n                <br />\n            </div>\n        }\n\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Edit User</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<FormGroup\n                            validationState={this.validateInput()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ControlLabel>Username</ControlLabel>\n\t\t\t\t\t\t\t<p>{this.state.row.username}</p>\n\t\t\t\t\t\t\t<br/>\n                            <ControlLabel>First Name</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"text\"\n                                name=\"first_name\"\n\t\t\t\t\t\t\t\tvalue={this.state.first_name || ''}\n\t\t\t\t\t\t\t\tplaceholder=\"First Name\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<br/>\n                            <ControlLabel>Last Name</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"text\"\n                                name=\"last_name\"\n\t\t\t\t\t\t\t\tvalue={this.state.last_name || ''}\n\t\t\t\t\t\t\t\tplaceholder=\"Last Name\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<br/>\n                            <ControlLabel>Active</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"checkbox\"\n                                checked={this.state.is_active || false}\n\t\t\t\t\t\t\t\tvalue={this.state.is_active}\n\t\t\t\t\t\t\t\tonChange={this.handleActiveCheckbox}\n\t\t\t\t\t\t\t/>\n                            <br />\n                            <ControlLabel>User Role</ControlLabel>\n                            {this.createRadioOptions()}\n                            {passwordBlock}\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n                    {this.state.error && <Alert bsStyle='danger'>Invalid password. Please make sure they match and try again.</Alert>}\n                    {this.state.backendError && <Alert bsStyle='danger'>Server error. Please try again.</Alert>}\n\t\t\t\t\t<Button onClick={this.cancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.submit} bsStyle=\"primary\">Save</Button>\n                    <Button onClick={() => { if (window.confirm('Are you sure you wish to delete this user?')) this.delete() } } bsStyle=\"danger\">Delete</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default EditUserModal;\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport EditUserModal from './EditUserModal';\n\nclass EditUserButton extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n            showUserModal: false,\n        }\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.closeModalDelete = this.closeModalDelete.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            row: this.props.row,\n        });\n    }\n\n    openModal() {\n        this.setState({showUserModal: true});\n    }\n\n    closeModal(user=null) {\n        if (user !== null) {\n            const updateUser = () => this.props.CustomFunction(user);\n            updateUser();\n        }\n        this.setState({showUserModal: false});\n    }\n\n    closeModalDelete(id=null) {\n        this.setState({showUserModal: false});\n        if (id !== null) {\n            const updateUser = () => this.props.CustomFunction(null, id);\n            updateUser();\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.props.row['id'] !== this.state.row['id']) {\n            this.setState({\n                row: this.props.row,\n            })\n        }\n    }\n\n    render() {\n        return(\n            <div>\n                <EditUserModal show={this.state.showUserModal} row={this.props.row} onDelete={this.closeModalDelete} onSubmit={this.closeModal}/>\n                <Button bsStyle=\"link\" onClick={this.openModal}>Edit User</Button>\n            </div>\n        )\n    }\n}\n\nexport default EditUserButton;\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\n\nclass UserHistoryButton extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n        }\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            row: this.props.row,\n        });\n    }\n\n    componentDidUpdate() {\n        if (this.props.row['id'] !== this.state.row['id']) {\n            this.setState({\n                row: this.props.row,\n            })\n        }\n    }\n\n    handleClick() {\n        const getUserHistory = () => this.props.CustomFunction(this.state.row['id'], this.state.row['username']);\n        getUserHistory();\n    }\n\n    render() {\n        return(\n            <div>\n                <Button bsStyle=\"link\" onClick={this.handleClick}>{this.state.row['name'] === undefined || this.state.row['name'] === ' ' ? \"[User History]\" : this.state.row['name'] }</Button>\n            </div>\n        )\n    }\n}\n\nexport default UserHistoryButton;\n","import React from 'react';\nimport { Button, ButtonToolbar } from 'react-bootstrap';\nimport ReactCollapsingTable from 'react-collapsing-table';\n\nclass UserHistory extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            history: [],\n            username: ''\n        };\n        this.closeHistoryView = this.closeHistoryView.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            history: this.props.history,\n            username: this.props.username\n        });\n    }\n\n    closeHistoryView() {\n        this.props.closeHistoryView();\n    }\n\n    render() {\n        const rows = this.state.history.map(item =>\n            (\n               {\n                   datetime: item.datetime,\n                   action: item.action,\n                   values: item.values\n               }\n           )\n        ).sort((a, b) => {\n            return b.datetime.localeCompare(a.datetime);\n        });\n\n        const columns = [\n            {\n                accessor: 'datetime',\n                label: 'Date/Time',\n                priorityLevel: 1,\n                position: 1,\n                minWidth: 100,\n                sortable: true\n            },\n            {\n                accessor: 'action',\n                label: 'Action',\n                priorityLevel: 2,\n                position: 2,\n                minWidth: 100,\n                sortable: true\n            },\n            {\n                accessor: 'values',\n                label: 'Values',\n                priorityLevel: 3,\n                position: 3,\n                minWidth: 100,\n                sortable: false\n            },\n        ];\n\n        return (\n            <div className='content'>\n                <h1>User History: {this.state.username}</h1>\n                <br />\n                <ButtonToolbar style={{ float: 'left' }}>\n                    <Button bsStyle='link' onClick={this.closeHistoryView}>Return to User Management</Button>\n                </ButtonToolbar>\n                <br/>\n                <ReactCollapsingTable\n                        rows = { rows }\n                        columns = { columns }\n                        column = {'datetime'}\n                        direction = {'descending'}\n                        showPagination={ true }\n                />\n            </div>\n        );\n    }\n}\n\nexport default UserHistory;","import React from 'react';\nimport Autocomplete from './Autocomplete';\nimport { Button, ButtonToolbar } from 'react-bootstrap';\nimport ReactCollapsingTable from 'react-collapsing-table';\nimport AddUserModal from './AddUserModal';\nimport EditUserButton from './EditUserButton';\nimport UserHistoryButton from './UserHistoryButton';\nimport { httpGet, domain } from './Helpers';\nimport UserHistory from './UserHistory';\n\nclass Users extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showUserModal: false,\n            users: [],\n            showingUsers: [],\n            role_ids: {},\n            role_names: {},\n            suggestionsArray: [],\n            showingAllUsers: true,\n            selectedUserHistory: [],\n            selectedUsername: '',\n            historyView: false\n        };\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.updateRow = this.updateRow.bind(this);\n        this.getFormattedTime = this.getFormattedTime.bind(this);\n        this.handler = this.handler.bind(this);\n        this.showAllUsers = this.showAllUsers.bind(this);\n        this.getUserHistory = this.getUserHistory.bind(this);\n        this.closeHistoryView = this.closeHistoryView.bind(this);\n    }\n\n    async componentDidMount() {\n        try {\n            const users = await httpGet(`https://${domain}/api/users/`);\n            let suggestionsArray = this.makeSuggestionsArray(users);\n            const roles = await httpGet(`https://${domain}/api/groups/`);\n            const role_ids = {};\n            const role_names = {};\n            for (var index in roles) {\n                role_ids[roles[index].name] = roles[index].id;\n                role_names[roles[index].id] = roles[index].name;\n            }\n            this.setState({\n                showingUsers: users,\n                users: users,\n                role_ids: role_ids, \n                role_names: role_names,\n                suggestionsArray: suggestionsArray\n            });\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    async componentDidUpdate() {\n        if (this.props.refreshRoles) {\n            const roles = await httpGet(`https://${domain}/api/groups/`);\n            const role_ids = {};\n            const role_names = {};\n            for (var index in roles) {\n                role_ids[roles[index].name] = roles[index].id;\n                role_names[roles[index].id] = roles[index].name;\n            }\n            this.setState({\n                role_ids: role_ids, \n                role_names: role_names,\n            });\n            this.props.toggleRefreshRoles(false);\n        }\n    }\n\n    makeSuggestionsArray(suggestions) {\n        var array = [];\n        var lastHolder1;\n        var lastHolder2;\n        var tempArray;\n        for (var object in suggestions) {\n          if (suggestions[object]['last_name'].includes(\" \")) {\n            tempArray = suggestions[object]['last_name'].split(\" \");\n            lastHolder1 = tempArray[0];\n            lastHolder2 = tempArray[1];\n          } else {\n            lastHolder1 = suggestions[object]['last_name'];\n            lastHolder2 = \"\";\n          }\n          array.push({\n            firstName: suggestions[object]['first_name'],\n            lastName1: lastHolder1,\n            lastName2: lastHolder2,\n            username: suggestions[object]['username'],\n            id: suggestions[object]['id']\n          });\n        }\n        return array;\n      }\n\n    handler(e, userId) {\n        let showingUsers = [];\n        if (userId !== null) {\n            showingUsers.push(this.state.users.find(item => item['id'] === parseInt(userId)));\n        }\n        this.setState({\n            showingUsers: showingUsers,\n            showingAllUsers: false\n        });\n    }\n\n    showAllUsers() {\n        const { users } = this.state;\n        this.setState({\n            showingUsers: users,\n            showingAllUsers: true\n        });\n    }\n\n    openModal() {\n        this.setState({showUserModal: true});\n    }\n\n    closeModal(user=null) {\n        const { users } = this.state;\n        let showingUsers = [];\n        if (user !== null) {\n            let newUser = {\n                'id': user.id, \n                'username': user.username, \n                'first_name': user.first_name,\n                'last_name': user.last_name,\n                'groups': user.groups, \n                'last_login': user.last_login,\n                'is_active': user.is_active\n            };\n            users.push(newUser);\n            showingUsers.push(newUser);\n        }\n        this.setState({showUserModal: false, users: users, showingUsers: showingUsers, showingAllUsers: false});\n    }\n\n    checkmark(boolean) {\n        if (boolean) {\n            return \"&#10003;\";\n        } else {\n            return \"\";\n        }\n    }\n\n    getFormattedTime(dateString) {\n        if (dateString === null || dateString.length === 0) {\n            return '';\n        }\n        let splitDateTime = dateString.split(\"T\")\n        let date = splitDateTime[0]\n        let time = splitDateTime[1].split(\".\")[0]\n        let splitTime = time.split(\":\")\n        let hours = parseInt(splitTime[0])\n        let ampm = hours >= 12 ? 'PM' : 'AM';\n        hours = hours % 12;\n        hours = hours === 0 ? 12 : hours\n        var formattedTime = date + ' ' + hours + ':' + splitTime[1] + ' ' + ampm\n        return formattedTime;\n    }\n\n    getUserRoleNames(groups) {\n        const group_names = [];\n        for (var index in groups) {\n            group_names.push(this.state.role_names[groups[index]]);\n        }\n        return group_names.join(', ');\n    }\n\n    updateRow(user, id = null) {\n        let { users } = this.state;\n        let showingUsers = [];\n        let showingAllUsers = false;\n        if (id !== null) {\n            users = users.filter(item => item.id !== id);\n            showingAllUsers = true;\n            showingUsers = users;\n        } else {\n            users = users.filter(item => item.id !== user.id);\n            let newUser = {\n                'id': user.id,\n                'username': user.username,\n                'first_name': user.first_name,\n                'last_name': user.last_name,\n                'groups': user.groups,\n                'last_login': user.last_login,\n                'is_active': user.is_active\n            };\n            users.push(newUser);\n            showingUsers.push(newUser)\n        }\n        this.setState({ users: users });\n        this.setState({ users: users, showingUsers: showingUsers, showingAllUsers: showingAllUsers });\n    }\n\n    getUserHistory(userId, username) {\n        const self = this;\n        httpGet(`https://${domain}/api/history/?user_id=${userId}`)\n            .then(function (result) {\n                if ('error' in result) {\n                    console.log(result);\n                } else {\n                    self.setState({ selectedUserHistory: result, historyView: true, selectedUsername: username});\n                }\n            });\n    }\n\n    closeHistoryView() {\n        this.setState({ historyView: false });\n    }\n\n    render() {\n        const rows = this.state.showingUsers.map(user =>\n            (\n               {\n                   username: user.username,\n                   first_name: user.first_name,\n                   last_name: user.last_name,\n                   name: user.first_name + \" \" + user.last_name,\n                   roles: this.getUserRoleNames(user.groups),\n                   groups: user.groups,\n                   lastLogin: this.getFormattedTime(user.last_login),\n                   isActive: this.checkmark(user.is_active),\n                   id: user.id,\n                   is_active: user.is_active,\n                   role_ids: this.state.role_ids,\n               }\n           )\n        ).sort((a, b) => {\n            return a.username.localeCompare(b.username);\n        });\n\n        const columns = [\n            {\n                accessor: 'name',\n                label: 'Name',\n                priorityLevel: 1,\n                position: 1,\n                CustomComponent: UserHistoryButton,\n                minWidth: 100,\n                sortable: true\n            },\n            {\n                accessor: 'username',\n                label: 'Username',\n                priorityLevel: 2,\n                position: 2,\n                minWidth: 100,\n                sortable: true\n            },\n            {\n                accessor: 'lastLogin',\n                label: 'Last Login',\n                priorityLevel: 3,\n                position: 3,\n                minWidth: 100,\n                sortable: true\n            },\n            {\n                accessor: 'roles',\n                label: 'User Roles',\n                priorityLevel: 4,\n                position: 4,\n                sortable: true,\n                minWidth: 30\n            },\n            { \n                accessor: 'isActive',\n                label: 'Active',\n                priorityLevel: 5,\n                position: 5,\n                minWidth: 20,\n                sortable: true, \n            },\n            { \n                accessor: 'edit',\n                label: '',\n                priorityLevel: 6,\n                position: 6,\n                CustomComponent: EditUserButton,\n                minWidth: 50,\n                sortable: false, \n            }\n        ];\n        const tableCallbacks = { edit: this.updateRow, name: this.getUserHistory }\n        if (this.state.historyView) {\n            return (\n                <UserHistory closeHistoryView={this.closeHistoryView} history={this.state.selectedUserHistory} username={this.state.selectedUsername}/>\n            );\n        }\n        return (\n            <div className='content'>\n                <AddUserModal role_ids={this.state.role_ids}\n                    show={this.state.showUserModal}\n                    onSubmit={this.closeModal} />\n                <h1>User Management</h1>\n                <br />\n                <ButtonToolbar style={{ float: 'right' }}>\n                    <Button className={this.state.showingAllUsers ? 'hidden' : ''} bsStyle='link' onClick={this.showAllUsers}>Show All Users</Button>\n                    <Button onClick={this.openModal}>New User</Button>\n                </ButtonToolbar>\n                <Autocomplete\n                    hasUsername={true}\n                    suggestions={this.state.suggestionsArray}\n                    handler={this.handler}\n                />\n                <br/>\n                <ReactCollapsingTable\n                        rows = { rows }\n                        columns = { columns }\n                        column = {'username'}\n                        direction = {'descending'}\n                        showPagination={ true }\n                        callbacks={ tableCallbacks }\n                />\n            </div>\n        );\n    }\n}\n\nexport default Users;","import React from 'react';\nimport { Button, Modal, FormGroup, FormControl, ControlLabel } from 'react-bootstrap';\nimport { httpPost, domain } from './Helpers';\n\nclass AddRoleModal extends React.Component {\n    \n    constructor(props) {\n\t\tsuper(props)\n\t\t\n        this.state = {\n            show: false,\n            name: '',\n            permission_ids: {},\n            checkboxes: []\n\t\t}\n\t\t\n\t\tthis.cancel = this.cancel.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.createCheckboxes = this.createCheckboxes.bind(this);\n    }\n    \n    componentDidUpdate() {\n        if (this.props.show !== this.state.show) {\n            const checkboxes = [];\n            const perm_ids = this.props.permission_ids;\n            const perm_names = Object.keys(perm_ids);\n            for (var index in perm_names) {\n                const perm_name = perm_names[index];\n                checkboxes.push({label: perm_name, checked: false})\n            }\n            this.setState({\n                permission_ids: this.props.permission_ids,\n                checkboxes: checkboxes,\n                show: this.props.show\n            });\n        }\n    }\n    \n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n\tcancel() {\n        this.setState({name: ''});\n\t\tthis.props.onSubmit();\n\t}\n\n\tsubmit() {\n        const self = this;\n        let body = { name: self.state.name };\n        let permissions = [];\n        const checkboxes = self.state.checkboxes;\n        for (var index in checkboxes) {\n            if (checkboxes[index].checked) {\n                permissions.push(self.state.permission_ids[checkboxes[index].label])\n            }\n        }\n        body[\"permissions\"] = permissions;\n        httpPost(`https://${domain}/api/groups/`, body)\n            .then(function (result) {\n                if ('error' in result) {\n                    console.log(result);\n                } else {\n                    self.setState({name: ''});\n                    self.props.onSubmit(result);\n                }\n            })\n    }\n\n    toggleCheckbox(index) {\n        const { checkboxes } = this.state;\n        checkboxes[index].checked = !checkboxes[index].checked;\n\n        this.setState({\n            checkboxes\n        });\n    }\n    \n    createCheckboxes() {\n        const { checkboxes } = this.state;\n    \n        return checkboxes\n            .map((checkbox, index) =>\n                <div key={index}>\n                    <label>\n                        <input\n                            type=\"checkbox\"\n                            checked={checkbox.checked}\n                            onChange={this.toggleCheckbox.bind(this, index)}\n                        />\n                        {checkbox.label}\n                    </label>\n                </div>\n            );\n    }\n\n    render() {\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Create New User Role</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<ControlLabel>Role Name</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"text\"\n                                name=\"name\"\n\t\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\t\tplaceholder=\"Role Name\"\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t{this.createCheckboxes()}\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button onClick={this.cancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.submit} bsStyle=\"primary\">Create</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default AddRoleModal;\n","import React from 'react';\nimport { Button, ControlLabel, FormControl, FormGroup, Modal } from 'react-bootstrap';\nimport { httpDelete, httpPatch, domain } from './Helpers';\n\nclass EditRoleModal extends React.Component {\n    \n    constructor(props) {\n\t\tsuper(props)\n        this.state = {\n            show: false,\n            row: {},\n            permission_ids: {},\n            checkboxes: []\n\t\t}\n        \n        this.delete = this.delete.bind(this);\n\t\tthis.cancel = this.cancel.bind(this);\n        this.submit = this.submit.bind(this);\n        this.createCheckboxes = this.createCheckboxes.bind(this);\n    }\n    \n    componentDidUpdate() {\n        if (this.props.row !== this.state.row) {\n            this.setState({\n                row: this.props.row,\n            });\n        }\n        if (this.props.show !== this.state.show) {\n            const checkboxes = [];\n            const perm_names = Object.keys(this.props.row.permission_ids);\n            const perm_ids = this.props.row.permission_ids;\n            for (var index in perm_names) {\n                const perm_name = perm_names[index];\n                const checked = this.props.row.permissions.indexOf(perm_ids[perm_name]) > -1;\n                checkboxes.push({label: perm_name, checked: checked})\n            }\n            this.setState({\n                checkboxes: checkboxes,\n                permission_ids: this.props.row.permission_ids,\n                show: this.props.show\n            });\n        }\n    }\n\n      \n    delete() {\n        const self = this;\n        httpDelete(`https://${domain}/api/groups/?id=${self.state.row.id}`)\n        .then(function (result) {\n            if ('error' in result) {\n                self.setState({\n                    backendError: true\n                });\n            } else {\n                self.props.onDelete(self.state.row.id);\n            }\n        });\n    }\n\n\tcancel() {\n        this.setState({\n            row: this.props.row,\n        });\n\t\tthis.props.onSubmit();\n\t}\n\n\tsubmit() {\n        const self = this;\n        let body = { name: self.state.row.name, id: self.state.row.id };\n        let permissions = [];\n        const checkboxes = self.state.checkboxes;\n        for (var index in checkboxes) {\n            if (checkboxes[index].checked) {\n                permissions.push(self.state.permission_ids[checkboxes[index].label])\n            }\n        }\n        body[\"permissions\"] = permissions;\n        httpPatch(`https://${domain}/api/groups/`, body)\n            .then(function (result) {\n                if ('error' in result) {\n                    console.log(result);\n                } else {\n                    self.props.onSubmit(result);\n                }\n            })\n    }\n    \n    toggleCheckbox(index) {\n        const { checkboxes } = this.state;\n        checkboxes[index].checked = !checkboxes[index].checked;\n\n        this.setState({\n            checkboxes\n        });\n    }\n\n    createCheckboxes() {\n        const { checkboxes } = this.state;\n    \n        return checkboxes\n            .map((checkbox, index) =>\n                <div key={index}>\n                    <label>\n                        <input\n                            type=\"checkbox\"\n                            checked={checkbox.checked}\n                            disabled={this.state.row.name === 'Admin'}\n                            onChange={this.toggleCheckbox.bind(this, index)}\n                        />\n                        {checkbox.label}\n                    </label>\n                </div>\n            );\n    }\n\n    render() {\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Edit User Role</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<ControlLabel>User Role</ControlLabel>\n\t\t\t\t\t\t\t<p>{this.state.row.name}</p>\n                            {this.createCheckboxes()}\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button onClick={this.cancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.submit} bsStyle=\"primary\">Save</Button>\n                    <Button onClick={() => { if (window.confirm('Are you sure you wish to delete this role?')) this.delete() }}\n                        bsStyle=\"danger\"\n                        disabled={this.state.row.name === \"Admin\"}>Delete</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default EditRoleModal;\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport EditRoleModal from './EditRoleModal';\n\nclass EditRoleButton extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n            showModal: false,\n        }\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.closeModalDelete = this.closeModalDelete.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            row: this.props.row,\n        });\n    }\n\n    openModal() {\n        this.setState({showModal: true});\n    }\n\n    closeModal(role=null) {\n        const { row } = this.state;\n        if (role !== null) {\n            this.props.row.permissions = role.permissions;\n            row.permissions = role.permissions;\n        }\n        this.setState({showModal: false, row: row});\n    }\n\n    closeModalDelete(id=null) {\n        this.setState({showModal: false});\n        if (id !== null) {\n            const deleteRole = () => this.props.CustomFunction(id);\n            deleteRole();\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.props.row['id'] !== this.state.row['id']) {\n            this.setState({\n                row: this.props.row,\n            })\n        }\n    }\n\n    render() {\n        return(\n            <div>\n                <EditRoleModal show={this.state.showModal} row={this.props.row} onDelete={this.closeModalDelete} onSubmit={this.closeModal}/>\n                <Button bsStyle=\"link\" onClick={this.openModal}>Edit User Role</Button>\n            </div>\n        )\n    }\n}\n\nexport default EditRoleButton;\n","import React from 'react';\nimport { Button, ButtonToolbar } from 'react-bootstrap';\nimport AddRoleModal from './AddRoleModal';\nimport EditRoleButton from './EditRoleButton';\nimport ReactCollapsingTable from 'react-collapsing-table';\nimport { httpGet, domain } from './Helpers';\n\n\nclass Roles extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showModal: false,\n            roles: [],\n            permissions_list: {},\n            permission_ids: {},\n        };\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.deleteRole = this.deleteRole.bind(this);\n    }\n\n    async componentDidMount() {\n        try {\n            const roles = await httpGet(`https://${domain}/api/groups/`);\n            const permissions_list = await httpGet(`https://${domain}/api/permissions/`);\n            let permission_ids = {};\n            for (var index in permissions_list) {\n                permission_ids[permissions_list[index].name] = permissions_list[index].id;\n            }\n            this.setState({\n                roles: roles,\n                permissions_list: permissions_list,\n                permission_ids: permission_ids,\n            });\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    openModal() {\n        this.setState({showModal: true});\n    }\n\n    closeModal(role=null) {\n        const { roles } = this.state;\n        if (role !== null) {\n            roles.push({\n                'id': role.id, 'name': role.name, 'permissions': role.permissions\n            });\n            this.props.toggleRefreshRoles(true);\n        }\n        this.setState({showModal: false, roles: roles});\n    }\n\n    deleteRole(id = null) {\n        let { roles } = this.state;\n        if (id !== null) {\n            roles = roles.filter(item => item.id !== id);\n            this.props.toggleRefreshRoles(true);\n        }\n        this.setState({ roles: roles });\n    }\n\n    render() {\n        const rows = this.state.roles.map(role =>\n            (\n               {\n                   name: role.name,\n                   permissions: role.permissions,\n                   id: role.id,\n                   permission_ids: this.state.permission_ids\n               }\n           )\n        ).sort((a, b) => {\n            return a.name.localeCompare(b.name);\n        });\n\n        const columns = [\n            {\n                accessor: 'name',\n                label: 'Role',\n                priorityLevel: 1,\n                position: 1,\n                minWidth: 50,\n                sortable: true\n            },\n            { \n                accessor: 'edit',\n                label: '',\n                priorityLevel: 2,\n                position: 5,\n                CustomComponent: EditRoleButton,\n                minWidth: 50,\n                sortable: false, \n            }\n        ];\n        const tableCallbacks = { edit: this.deleteRole }\n        return (\n            <div className=\"content\">\n                <h1>User Roles</h1>\n                <ButtonToolbar style={{ float: 'right' }}>\n                    <Button onClick={this.openModal}>New User Role</Button>\n                </ButtonToolbar>\n                <AddRoleModal permission_ids={this.state.permission_ids}\n                    show={this.state.showModal}\n                    onSubmit={this.closeModal} />\n                <ReactCollapsingTable\n                        rows = { rows }\n                        columns = { columns }\n                        column = {'name'}\n                        direction = {'descending'}\n                        showPagination={ true }\n                        callbacks = { tableCallbacks }\n                />\n            </div>\n        );\n    }\n}\n\nexport default Roles;","import React from 'react';\nimport { Button, ButtonToolbar, ListGroup, ListGroupItem, Modal } from 'react-bootstrap';\nimport { httpGet, httpPatch, domain } from './Helpers';\nimport Autocomplete from './Autocomplete';\n\nclass AssignStudentKeyModal extends React.Component {\n    \n    constructor(props) {\n        super(props);\n\n        this.state = {\n            oldID: 0,\n            student: {},\n            suggestions: [],\n            searchArray: [],\n            match: \"\",\n        }\n\n        this.onCancel = this.onCancel.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.setMatch = this.setMatch.bind(this);\n        this.buildSuggestionsArray = this.buildSuggestionsArray.bind(this);\n        this.setMatchFromSearch = this.setMatchFromSearch.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            oldID: this.props.studentID\n        });\n    }\n\n    async componentDidUpdate() {\n        if (this.props.studentID !== this.state.oldID && this.props.studentID !== -1) {\n            const student = await httpGet(`https://${domain}/api/students/?id=${this.props.studentID}`);\n            const suggestions = await httpGet(`https://${domain}/api/suggestions/student/?id=${this.props.studentID}`);\n            const searchArray = this.buildSuggestionsArray();\n\n            this.setState({\n                student: student,\n                suggestions: suggestions,\n                searchArray: searchArray,\n                oldID: this.props.studentID\n            });\n        }\n    }\n\n    buildSuggestionsArray() {\n        let array = []\n        const citySpanStudents = this.props.citySpanStudents;\n        for (var object in this.props.citySpanStudents) {\n            array.push({\n                firstName: citySpanStudents[object].first_name,\n                lastName1: citySpanStudents[object].last_name,\n                lastName2: \"\",\n                id: citySpanStudents[object].student_key\n            });\n        }\n        return array;\n    }\n\n    setMatch(studentKey) {\n        this.setState({match: studentKey});\n    }\n\n    setMatchFromSearch(e, studentKey) {\n        this.setState({match: studentKey});\n    }\n\n    onCancel() {\n        this.setState({student: {}, match: \"\", suggestions: []});\n        this.props.onClose()\n    }\n\n    onSubmit() {\n        // PATCH student\n        httpPatch(`https://${domain}/api/students/`, {'student_key': this.state.match, 'id': this.props.studentID});\n        this.setState({student: {}, match: \"\", suggestions: []});\n        this.props.onClose(this.props.studentID);\n    }\n\n    render() {\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Find Student Key Match: {this.state.student.first_name !== undefined ? this.state.student.first_name + ' ' + this.state.student.last_name : ''}</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n                    <h4>Suggestions:</h4>\n                    {this.state.suggestions.length === 3 \n                    && <ListGroup>\n                        <ListGroupItem><ButtonToolbar style={{float: 'right'}} ><Button onClick={() => this.setMatch(this.state.suggestions[0].match_key)} bsStyle=\"primary\">Select</Button></ButtonToolbar><p style={{paddingTop: '4px'}}>{this.state.suggestions[0].match_name}</p></ListGroupItem>\n                        <ListGroupItem><ButtonToolbar style={{float: 'right'}} ><Button onClick={() => this.setMatch(this.state.suggestions[1].match_key)} bsStyle=\"primary\">Select</Button></ButtonToolbar><p style={{paddingTop: '4px'}}>{this.state.suggestions[1].match_name}</p></ListGroupItem>\n                        <ListGroupItem><ButtonToolbar style={{float: 'right'}} ><Button onClick={() => this.setMatch(this.state.suggestions[2].match_key)} bsStyle=\"primary\">Select</Button></ButtonToolbar><p style={{paddingTop: '4px'}}>{this.state.suggestions[2].match_name}</p></ListGroupItem>\n                      </ListGroup>}\n                    <br/>\n                    <h4>Search for match:</h4>\n                    <Autocomplete suggestions={this.state.searchArray} handler={this.setMatchFromSearch}/>\n                    <br/>\n                    {this.state.match !== \"\" &&  <h4>Selected student key: {this.state.match}</h4>}\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button onClick={this.onCancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.onSubmit} bsStyle=\"primary\">Save</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default AssignStudentKeyModal;\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\n\nclass AssignStudentKeyButton extends React.Component {\n    \n\n    render() {\n        return(\n            <div>\n                <Button bsStyle=\"link\" onClick={() => this.props.CustomFunction(this.props.row['id'])}>Assign Student Key</Button>\n            </div>\n        )\n    }\n}\n\nexport default AssignStudentKeyButton;\n","import React from 'react';\nimport { Button, Form, FormControl, FormGroup, ControlLabel, Label, Well } from 'react-bootstrap';\nimport { httpGet } from './Helpers';\n\nclass FileUploader extends React.Component {\n\t\n\tconstructor() {\n\t  super();\n\t  this.state = {\n\t\tfile: undefined,\n\t\terror: \"\",\n\t  };\n\n\t  this.submit = this.submit.bind(this);\n\t}\n  \n\thandleChange = event => {\n\t\tconst file = event.target.files[0];\n\n\t\t// if we don't have a filetype requirement or the file matches the type requirement\n\t\tif (!this.props.extension || file.name.indexOf(this.props.extension) >= 0) {\n\t\t\tthis.setState({\n\t\t\t\tfile: file,\n\t\t\t\terror: \"\"\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\terror: \"Invalid file type\"\n\t\t\t})\n\t\t}\n\t};\n\n\tsubmit() {\n\t\tif (this.state.file !== undefined) {\n\t\t\tthis.props.upload(this.state.file);\n\t\t\tthis.setState({file: undefined});\n\t\t}\n\t}\n  \n\trender() {\n\t  return (\n\t\t<Form>\n\t\t\t<FormGroup>\n\t\t\t<ControlLabel style={{display: 'inline-block'}}>{this.props.label}</ControlLabel>{' '}\n\t\t\t\t<Well style={{display: 'inline-block'}}>\n\t\t\t\t\t<input style={{display: 'inline-block'}} onChange={this.handleChange} placeholder={null} type=\"file\"/>\n\t\t\t\t</Well>\n\t\t\t\t{' '}<Button style={{display: 'inline-block'}} onClick={this.submit}>Upload</Button>\n\t\t\t</FormGroup>\n\t\t\t{this.state.error !== \"\" && <Label bsStyle=\"danger\">Error: {this.state.error}</Label>}\n\t\t</Form>\n\t  );\n\t}\n  }\n  \n  export default FileUploader;","import React from 'react';\nimport Autocomplete from './Autocomplete';\nimport AssignStudentKeyModal from './AssignStudentKeyModal';\nimport AssignStudentKeyButton from './AssignStudentKeyButton';\nimport ReactCollapsingTable from 'react-collapsing-table';\nimport { httpGet, httpPatch, domain } from './Helpers';\nimport FileUploader from './FileUploader';\n\nclass StudentKeys extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            unmatchedStudents: [],\n            citySpanStudents: [],\n            suggestions: [],\n            showModal: false,\n            focusedStudent: -1,\n        };\n\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n        this.handleRowClick = this.handleRowClick.bind(this);\n        this.handleSearch = this.handleSearch.bind(this);\n        this.handleCSVUpload = this.handleCSVUpload.bind(this);\n        this.processCSV = this.processCSV.bind(this);\n    }\n\n    async componentDidMount() {\n        try {\n            const unmatchedStudents = await httpGet(`https://${domain}/api/suggestions/unmatchedstudents/`);\n            const citySpanStudents = await httpGet(`https://${domain}/api/suggestions/cityspanstudents/`);\n            const suggestions = this.makeSuggestionsArray(unmatchedStudents);\n\n            this.setState({\n                unmatchedStudents: unmatchedStudents,\n                suggestions: suggestions,\n                showModal: false,\n                focusedStudent: -1,\n                citySpanStudents: citySpanStudents\n            });\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    handleCSVUpload(csv) {\n        var papa = require('papaparse');\n        papa.parse(csv, {error: this.tmpfail, fastMode: true, complete: (result, file) => this.processCSV(result), header: true});\n    }\n\n    processCSV(result) {\n        var output = []\n        for (let index in result.data) {\n            let obj = result.data[index];\n            if (obj[\"Student Key\"] === \"\" || obj[\"Student Key\"] === null || obj[\"Student Key\"] === undefined) {\n                continue;\n            } \n            output.push({first_name: obj[\"First Name\"], last_name: obj[\"Last Name\"], student_key: obj[\"Student Key\"]})\n        }\n        httpPatch(`https://${domain}/api/suggestions/cityspanstudents/`, {\"students\": output});\n    }\n\n    tmpfail(error, file) {\n        console.log(error);\n    }\n\n    handleRowClick(studentID) {\n        this.setState({\n            focusedStudent: studentID,\n            showModal: true\n        });\n    }\n\n    openModal() {\n        this.setState({\n            showModal: true\n        });\n    }\n\n    closeModal(studentID) {\n        const { unmatchedStudents } = this.state;\n        for (let i = 0; i < unmatchedStudents.length; i++) {\n            if (unmatchedStudents[i].id === studentID) {\n                unmatchedStudents.splice(i, 1);\n            }\n        }\n        this.setState({\n            showModal: false,\n            unmatchedStudents: unmatchedStudents\n        });\n    }\n\n    handleSearch(e, studentID) {\n        this.setState({\n            focusedStudent: studentID,\n            showModal: true\n        });\n    }\n\n    makeSuggestionsArray(suggestions) {\n        var array = [];\n        var lastHolder1;\n        var lastHolder2;\n        var tempArray;\n        for (var object in suggestions) {\n            if (suggestions[object]['last_name'].includes(\" \")) {\n                tempArray = suggestions[object]['last_name'].split(\" \");\n                lastHolder1 = tempArray[0];\n                lastHolder2 = tempArray[1];\n            }\n            else {\n                lastHolder1 = suggestions[object]['last_name'];\n                lastHolder2 = \"\";\n            }\n            array.push({\n                firstName: suggestions[object]['first_name'],\n                lastName1: lastHolder1,\n                lastName2: lastHolder2,\n                id: suggestions[object]['id']\n            });\n        }\n        return array;\n    }\n\n    updateStudents(studentID) {\n        const { unmatchedStudents } = this.state;\n        for (let i = 0; i < unmatchedStudents.length; i++) {\n            if (unmatchedStudents[i].id === studentID) {\n                unmatchedStudents.splice(i, 1);\n            }\n        }\n        this.setState({unmatchedStudents: unmatchedStudents});\n    }\n\n    render() {\n        const rows = this.state.unmatchedStudents.map(student =>\n            (\n               {\n                   name: `${student.first_name} ${student.last_name}`,\n                   id: student.id\n               }\n           )\n        ).sort((a, b) => {\n            return a.name.localeCompare(b.name);\n        });\n\n        const columns = [\n            {\n                accessor: 'name',\n                label: 'Name',\n                priorityLevel: 1,\n                position: 1,\n                minWidth: 50,\n                sortable: true\n            },\n            { \n                accessor: 'edit',\n                label: '',\n                priorityLevel: 2,\n                position: 5,\n                CustomComponent: AssignStudentKeyButton,\n                minWidth: 50,\n                sortable: false, \n            }\n        ];\n\n        return (\n            <div className=\"content\">\n                <h1>Students Without Student Keys</h1>\n                <AssignStudentKeyModal show={this.state.showModal} studentID={this.state.focusedStudent} citySpanStudents={this.state.citySpanStudents} onClose={this.closeModal}/>\n                <br/>\n                <div style={{display: 'inline-block'}}>\n                    <Autocomplete\n                        suggestions={this.state.suggestions}\n                        handler={this.handleSearch}\n                    />\n                </div>\n                <div style={{float: 'right'}}>\n                    <FileUploader extension=\".csv\" label=\"Upload Cityspan Student CSV:\" upload={this.handleCSVUpload}/>\n                </div>\n                <ReactCollapsingTable\n                        rows = { rows }\n                        columns = { columns }\n                        column = {'name'}\n                        direction = {'descending'}\n                        showPagination={ true }\n                        callbacks = {{'edit':this.handleRowClick}}\n                />\n            </div>\n        );\n    }\n}\n\nexport default StudentKeys ;","import React from 'react';\nimport { Button } from 'react-bootstrap';\n\nclass ShiftDownButton extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n        }\n        this.handleButtonClick = this.handleButtonClick.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            row: this.props.row,\n        });\n    }\n\n    handleButtonClick() {\n        const swapOrder = () => this.props.CustomFunction(this.state.row.ordering, 'down');\n        swapOrder();\n    }\n\n    componentDidUpdate() {\n        if (this.props.row['activity_id'] !== this.state.row['activity_id']) {\n            this.setState({\n                row: this.props.row,\n            })\n        }\n    }\n\n    render() {\n        return(\n            <div>\n                <Button onClick={this.handleButtonClick}>Shift Down</Button>\n            </div>\n        )\n    }\n}\n\nexport default ShiftDownButton;\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\n\nclass ShiftUpButton extends React.Component {\n    \n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n        }\n        this.handleButtonClick = this.handleButtonClick.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({\n            row: this.props.row,\n        });\n    }\n\n    handleButtonClick() {\n        const swapOrder = () => this.props.CustomFunction(this.state.row.ordering, 'up');\n        swapOrder();\n    }\n\n    componentDidUpdate() {\n        if (this.props.row['activity_id'] !== this.state.row['activity_id']) {\n            this.setState({\n                row: this.props.row,\n            })\n        }\n    }\n\n    render() {\n        return(\n            <div>\n                <Button bsStyle=\"primary\" onClick={this.handleButtonClick}>Shift Up</Button>\n            </div>\n        )\n    }\n}\n\nexport default ShiftUpButton;\n","import React, { Component } from 'react';\nimport { httpPatch, domain } from './Helpers';\n\nclass ShowActivityCheckbox extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n            checked: false\n        }\n        this.toggleCheckbox = this.toggleCheckbox.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({ row: this.props.row, checked: this.props.row.is_showing })\n    }\n\n    componentDidUpdate() {\n        if (this.props.row.is_showing !== this.state.checked) {\n            this.setState({ checked: this.props.row.is_showing })\n        }\n    }\n\n    toggleCheckbox = () => {\n        let self = this;\n        let { row } = self.state;\n        let body = {activity_id: row.activity_id, is_showing: !self.state.checked};\n        httpPatch(`https://${domain}/api/activities/`, body)\n            .then(function (response) {\n                if ('error' in response) {\n                    console.log(response);\n                } else {\n                    const updateCheckbox = () => self.props.CustomFunction(response);\n                    updateCheckbox();\n                }\n            });\n    };\n\n    render() {\n        return (\n            <span className=\"checkbox\">\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={this.state.checked}\n                        onChange={this.toggleCheckbox}\n                    />\n                </label>\n            </span>\n        );\n    }\n}\n\nexport default ShowActivityCheckbox;\n","import React from 'react';\nimport { Alert, Button, ControlLabel, FormControl, FormGroup, Modal } from 'react-bootstrap';\nimport { httpPost, domain } from './Helpers';\n\nclass AddActivityModal extends React.Component {\n    \n    constructor(props) {\n\t\tsuper(props)\n\t\t\n        this.state = {\n            show: false,\n            name: '',\n            type: 'boolean',\n            inUse: true,\n            lastOrdering: 0,\n            error: false,\n            errorMsg: ''\n\t\t}\n\t\t\n\t\tthis.cancel = this.cancel.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.validateInput = this.validateInput.bind(this);\n        this.handleCheckbox = this.handleCheckbox.bind(this);\n    }\n    \n    componentDidUpdate() {\n        if (this.props.show !== this.state.show) {\n            this.setState({\n                show: this.props.show,\n                lastOrdering: this.props.lastOrdering\n            });\n        }\n    }\n\n    validateInput() {\n\t\tconst { name } = this.state;\n        const regex = /^[a-z0-9.@+\\-_]+$/i;\n        if (name.length > 0 && regex.test(name) && this.state.type) {\n\t\t\treturn 'success';\n\t\t} else if (name.length === 0) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn 'error';\n\t\t}\n    }\n    \n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n\tcancel() {\n        this.setState({\n            name: '',\n            type: 'boolean',\n            inUse: true,\n            lastOrdering: 0,\n            error: false,\n            errorMsg: ''\n        });\n\t\tthis.props.onSubmit();\n\t}\n\n\tsubmit() {\n        const self = this;\n        if (self.validateInput() !== 'success') {\n            const errorMsg = 'Invalid input. Please check your fields and try again.'\n            self.setState({\n                error: true,\n                errorMsg: errorMsg\n            });\n            return;\n        }\n        let body = {\n            name: self.state.name,\n            ordering: self.state.lastOrdering + 1,\n            is_showing: self.state.inUse,\n            type: self.state.type\n        }\n        httpPost(`https://${domain}/api/activities/`, body)\n            .then(function (result) {\n                if ('error' in result) {\n                    if (result['error'] === 400) {\n                        const errorMsg = 'Creation failed due to invalid input. Please check your fields and try again';\n                        self.setState({\n                            error: true,\n                            errorMsg: errorMsg\n                        });\n            return;\n                    }\n                } else {\n                    self.setState({\n                        name: '',\n                        type: 'boolean',\n                        inUse: true,\n                        lastOrdering: 0,\n                        error: false,\n                        errorMsg: ''\n                    });\n                    self.props.onSubmit(result);\n                }\n            })\n    }\n\n    handleCheckbox = e => {\n        this.setState({inUse: !this.state.inUse});\n    }\n    \n    render() {\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Create New Activity</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n                        <FormGroup\n                            validationState={this.validateInput()}>\n                            <ControlLabel>Activity Name</ControlLabel>\n                            <FormControl\n                                type=\"text\"\n                                name=\"name\"\n                                value={this.state.name}\n                                placeholder=\"Activity Name\"\n                                onChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n                            <br/>\n                            <FormControl componentClass=\"select\" \n                            name=\"type\" \n                            onChange={this.handleChange}\n                            defaultValue={this.state.type}\n                            >\n                                <option value=\"boolean\">Checkbox</option>\n                                <option value=\"string\">Text</option>\n                                <option value=\"float\">Number</option>\n                            </FormControl>\n\t\t\t\t\t\t\t<br/>\n                            <ControlLabel>Currently in Use</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"checkbox\"\n                                checked={this.state.inUse}\n\t\t\t\t\t\t\t\tvalue={this.state.inUse}\n                                onChange={this.handleCheckbox}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n                    {this.state.error && <Alert bsStyle='danger'>{this.state.errorMsg}</Alert>}\n\t\t\t\t\t<Button onClick={this.cancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.submit} bsStyle=\"primary\">Create</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default AddActivityModal;\n","import React from 'react';\nimport ReactCollapsingTable from 'react-collapsing-table';\nimport { httpGet, httpPatch, domain } from './Helpers';\nimport ShiftDownButton from './ShiftDownButton';\nimport ShiftUpButton from './ShiftUpButton';\nimport ShowActivityCheckbox from './ShowActivityCheckbox';\nimport { Button, ButtonToolbar } from 'react-bootstrap';\nimport AddActivityModal from './AddActivityModal';\n\nclass Activities extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activities: [],\n            showModal: false\n        };\n\n        this.patchActivityOrder = this.patchActivityOrder.bind(this);\n        this.createNewActivity = this.createNewActivity.bind(this);\n        this.swapOrder = this.swapOrder.bind(this);\n        this.updateCheckbox = this.updateCheckbox.bind(this);\n        this.getDataTypeName = this.getDataTypeName.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n    }\n\n    async componentDidMount() {\n        try {\n            const activities = await httpGet(`https://${domain}/api/activities/`);\n            this.setState({\n                activities\n            });\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    createNewActivity(activity) {\n        return {\n            activity_id: activity.activity_id,\n            type: activity.type,\n            ordering: activity.ordering,\n            is_showing: activity.is_showing,\n            name: activity.name\n        };\n    }\n\n    patchActivityOrder(id1, id2) {\n        let { activities } = this.state;\n        let self = this;\n        let body = { activity_id1: id1, activity_id2: id2 };\n        httpPatch(`https://${domain}/api/activities/`, body)\n            .then(function (response) {\n                if ('error' in response[0] || 'error' in response[1]) {\n                    console.log(response);\n                } else {\n                    let activity1 = response[0];\n                    let activity2 = response[1];\n                    if (activity1 && activity2) {\n                        activities = activities.filter(item => item.activity_id !== activity1.activity_id);\n                        activities = activities.filter(item => item.activity_id !== activity2.activity_id);\n                        activities.push(self.createNewActivity(activity1));\n                        activities.push(self.createNewActivity(activity2));\n                    }\n                    self.setState({\n                        activities\n                    });\n                }\n            });\n    }\n\n    swapOrder(ordering, direction) {\n        let { activities } = this.state;\n        if (ordering !== null && direction === 'up' && ordering > 1) {\n            let activity1 = activities.find(item => item.ordering === ordering);\n            let activity2 = activities.find(item => item.ordering === ordering - 1);\n            this.patchActivityOrder(activity1.activity_id, activity2.activity_id);\n        } else if (ordering !== null && direction === 'down' && ordering < activities.length) {\n            let activity1 = activities.find(item => item.ordering === ordering);\n            let activity2 = activities.find(item => item.ordering === ordering + 1);\n            this.patchActivityOrder(activity1.activity_id, activity2.activity_id);\n        }\n    }\n\n    updateCheckbox(activity=null) {\n        let self = this;\n        let { activities } = self.state;\n        if (activity !== null) {\n            activities = activities.filter(item => item.activity_id !== activity.activity_id);\n            activities.push(this.createNewActivity(activity));\n        }\n        self.setState({\n            activities\n        });\n    }\n\n    getDataTypeName(type) {\n        if (type === 'boolean') {\n            return 'Checkbox';\n        } else if (type === 'string') {\n            return 'Text';\n        } else if (type === 'float') {\n            return 'Number';\n        }\n        return type;\n    }\n\n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n    openModal() {\n        this.setState({showModal: true});\n    }\n\n    closeModal(activity=null) {\n        const { activities } = this.state;\n        if (activity !== null) {\n            activities.push(this.createNewActivity(activity));\n        }\n        this.setState({showModal: false, activities: activities});\n    }\n\n    render() {\n        const rows = this.state.activities.map(activity =>\n            (\n               {\n                   name: activity.name,\n                   ordering: activity.ordering,\n                   is_showing: activity.is_showing,\n                   activity_id: activity.activity_id,\n                   type: activity.type,\n                   type_name: this.getDataTypeName(activity.type)\n               }\n           )\n        ).sort((a, b) => {\n            return a.ordering - b.ordering;\n        });\n\n        const columns = [\n            {\n                accessor: 'name',\n                label: 'Activity',\n                priorityLevel: 1,\n                position: 1,\n                minWidth: 100,\n                sortable: false\n            },\n            {\n                accessor: 'type_name',\n                label: 'Data Type',\n                priorityLevel: 2,\n                position: 2,\n                minWidth: 100,\n                sortable: false\n            },\n            {\n                accessor: 'is_showing',\n                label: 'Currently in Use',\n                priorityLevel: 3,\n                position: 3,\n                CustomComponent: ShowActivityCheckbox,\n                minWidth: 50,\n                sortable: false\n            },\n            {\n                accessor: 'up',\n                label: '',\n                priorityLevel: 4,\n                position: 4,\n                CustomComponent: ShiftUpButton,\n                minWidth: 100,\n                sortable: false\n            },\n            { \n                accessor: 'down',\n                label: '',\n                priorityLevel: 5,\n                position: 5,\n                CustomComponent: ShiftDownButton,\n                minWidth: 50,\n                sortable: false, \n            }\n        ];\n        const tableCallbacks = { up: this.swapOrder, down: this.swapOrder, is_showing: this.updateCheckbox }\n        return (\n            <div className=\"content\">\n                <h1>Attendance Activities</h1>\n                <ButtonToolbar style={{ float: 'right'}}>\n                    <Button onClick={this.openModal}>New Activity</Button>\n                </ButtonToolbar>\n                <AddActivityModal show={this.state.showModal}\n                    lastOrdering={this.state.activities.length}\n                    onSubmit={this.closeModal} />\n                <ReactCollapsingTable\n                        rows = { rows }\n                        columns = { columns }\n                        column = {'name'}\n                        direction = {'descending'}\n                        showPagination={ true }\n                        callbacks = { tableCallbacks }\n                />\n            </div>\n        );\n    }\n}\n\nexport default Activities;","import React, { Component } from 'react';\nimport { httpPatch, domain } from './Helpers';\n\nclass StudentFieldCheckbox extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            row: {},\n            checked: false\n        }\n        this.toggleCheckbox = this.toggleCheckbox.bind(this);\n    }\n\n    componentDidMount() {\n        if (this.props.accessor === 'is_showing') {\n            this.setState({ row: this.props.row, checked: this.props.row.is_showing });\n        } else if (this.props.accessor === 'quick_add') {\n            this.setState({ row: this.props.row, checked: this.props.row.quick_add });\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.props.row.info_id !== this.state.row.info_id) {\n            this.setState({ row: this.props.row });\n        }\n        if (this.props.accessor === 'is_showing' && this.props.row.is_showing !== this.state.checked) {\n            this.setState({ checked: this.props.row.is_showing });\n        } else if (this.props.accessor === 'quick_add' && this.props.row.quick_add !== this.state.checked) {\n            this.setState({ checked: this.props.row.quick_add });\n        }\n    }\n\n    toggleCheckbox = () => {\n        let self = this;\n        let { row } = self.state;\n        let body = {info_id: row.info_id};\n        body[self.props.accessor] = !self.state.checked;\n        httpPatch(`https://${domain}/api/student_column/`, body)\n            .then(function (response) {\n                if ('error' in response) {\n                    console.log(response);\n                } else {\n                    const updateCheckbox = () => self.props.CustomFunction(response);\n                    updateCheckbox();\n                }\n            });\n    };\n\n    render() {\n        return (\n            <span className=\"checkbox\">\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={this.state.checked}\n                        onChange={this.toggleCheckbox}\n                    />\n                </label>\n            </span>\n        );\n    }\n}\n\nexport default StudentFieldCheckbox;\n","import React from 'react';\nimport { Alert, Button, ControlLabel, FormControl, FormGroup, Modal } from 'react-bootstrap';\nimport { httpPost, domain } from './Helpers';\n\nclass AddStudentFieldModal extends React.Component {\n    \n    constructor(props) {\n\t\tsuper(props)\n\t\t\n        this.state = {\n            show: false,\n            name: '',\n            type: 'str',\n            inUse: true,\n            quickAdd: false,\n            error: false,\n            errorMsg: ''\n\t\t}\n\t\t\n\t\tthis.cancel = this.cancel.bind(this);\n\t\tthis.submit = this.submit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.validateInput = this.validateInput.bind(this);\n        this.handleInUseCheckbox = this.handleInUseCheckbox.bind(this);\n        this.handleQuickAddCheckbox = this.handleQuickAddCheckbox.bind(this);\n    }\n    \n    componentDidUpdate() {\n        if (this.props.show !== this.state.show) {\n            this.setState({\n                show: this.props.show,\n            });\n        }\n    }\n\n    validateInput() {\n\t\tconst { name } = this.state;\n        const regex = /^[a-z0-9.@+\\- _]+$/i;\n        if (name.length > 0 && regex.test(name) && this.state.type) {\n\t\t\treturn 'success';\n\t\t} else if (name.length === 0) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn 'error';\n\t\t}\n    }\n    \n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n\tcancel() {\n        this.setState({\n            name: '',\n            type: 'str',\n            inUse: true,\n            quickAdd: false,\n            error: false,\n            errorMsg: ''\n        });\n\t\tthis.props.onSubmit();\n\t}\n\n\tsubmit() {\n        const self = this;\n        if (self.validateInput() !== 'success') {\n            const errorMsg = 'Invalid input. Please check your fields and try again.'\n            self.setState({\n                error: true,\n                errorMsg: errorMsg\n            });\n            return;\n        }\n        let body = {\n            name: self.state.name,\n            is_showing: self.state.inUse,\n            quick_add: self.state.quickAdd,\n            type: self.state.type\n        }\n        httpPost(`https://${domain}/api/student_column/`, body)\n            .then(function (result) {\n                if ('error' in result) {\n                    if (result['error'] === 400) {\n                        const errorMsg = 'Creation failed due to invalid input. Please check your fields and try again';\n                        self.setState({\n                            error: true,\n                            errorMsg: errorMsg\n                        });\n            return;\n                    }\n                } else {\n                    self.setState({\n                        name: '',\n                        type: 'str',\n                        inUse: true,\n                        quickAdd: false,\n                        error: false,\n                        errorMsg: ''\n                    });\n                    self.props.onSubmit(result);\n                }\n            })\n    }\n\n    handleInUseCheckbox = e => {\n        this.setState({inUse: !this.state.inUse});\n    }\n\n    handleQuickAddCheckbox = e => {\n        this.setState({quickAdd: !this.state.quickAdd});\n    }\n    \n    render() {\n        return(\n            <Modal show={this.props.show}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>Create New Activity</Modal.Title>\n\t\t\t\t</Modal.Header>\n\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<form>\n                        <FormGroup\n                            validationState={this.validateInput()}>\n                            <ControlLabel>Field Name</ControlLabel>\n                            <FormControl\n                                type=\"text\"\n                                name=\"name\"\n                                value={this.state.name}\n                                placeholder=\"Field Name\"\n                                onChange={this.handleChange}\n\t\t\t\t\t\t\t/>\n                            <br/>\n                            <FormControl componentClass=\"select\" \n                            name=\"type\" \n                            onChange={this.handleChange}\n                            defaultValue={this.state.type}\n                            >\n                                <option value=\"date\">Date</option>\n                                <option value=\"str\">Text</option>\n                                <option value=\"int\">Number</option>\n                            </FormControl>\n\t\t\t\t\t\t\t<br/>\n                            <ControlLabel>Currently in Use</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"checkbox\"\n                                checked={this.state.inUse}\n\t\t\t\t\t\t\t\tvalue={this.state.inUse}\n                                onChange={this.handleInUseCheckbox}\n\t\t\t\t\t\t\t/>\n                            <br/>\n                            <ControlLabel>Show in Quick Add</ControlLabel>\n\t\t\t\t\t\t\t<FormControl\n                                type=\"checkbox\"\n                                checked={this.state.quickAdd}\n\t\t\t\t\t\t\t\tvalue={this.state.quickAdd}\n                                onChange={this.handleQuickAddCheckbox}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl.Feedback />\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</Modal.Body>\n\n\t\t\t\t<Modal.Footer>\n                    {this.state.error && <Alert bsStyle='danger'>{this.state.errorMsg}</Alert>}\n\t\t\t\t\t<Button onClick={this.cancel}>Cancel</Button>\n\t\t\t\t\t<Button onClick={this.submit} bsStyle=\"primary\">Create</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n        )\n    }\n}\n\nexport default AddStudentFieldModal;\n","import React from 'react';\nimport ReactCollapsingTable from 'react-collapsing-table';\nimport { httpGet, httpPatch, domain } from './Helpers';\nimport StudentFieldCheckbox from './StudentFieldCheckbox';\nimport { Button, ButtonToolbar } from 'react-bootstrap';\nimport AddStudentFieldModal from './AddStudentFieldModal';\n\nclass EditStudentFields extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            fields: [],\n            showModal: false\n        };\n\n        this.createNewField = this.createNewField.bind(this);\n        this.updateCheckbox = this.updateCheckbox.bind(this);\n        this.getDataTypeName = this.getDataTypeName.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.openModal = this.openModal.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n    }\n\n    async componentDidMount() {\n        try {\n            const fields = await httpGet(`https://${domain}/api/student_column/`);\n            this.setState({\n                fields\n            });\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    createNewField(field) {\n        return {\n            info_id: field.info_id,\n            is_showing: field.is_showing,\n            quick_add: field.quick_add,\n            name: field.name,\n            type: field.type,\n        };\n    }\n\n    updateCheckbox(field=null) {\n        let self = this;\n        let { fields } = self.state;\n        if (field !== null) {\n            fields = fields.filter(item => item.info_id !== field.info_id);\n            fields.push(this.createNewField(field));\n        }\n        self.setState({\n            fields\n        });\n    }\n\n    getDataTypeName(type) {\n        if (type === 'date') {\n            return 'Date';\n        } else if (type === 'str') {\n            return 'Text';\n        } else if (type === 'int') {\n            return 'Number';\n        }\n        return type;\n    }\n\n    handleChange = e => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState(prevstate => {\n            const newState = { ...prevstate };\n            newState[name] = value;\n            return newState;\n        });\n    };\n\n    openModal() {\n        this.setState({showModal: true});\n    }\n\n    closeModal(field=null) {\n        const { fields } = this.state;\n        if (field !== null) {\n            fields.push(this.createNewField(field));\n        }\n        this.setState({showModal: false, fields: fields});\n    }\n\n    render() {\n        const rows = this.state.fields.map(field =>\n            (\n               {\n                   name: field.name,\n                   is_showing: field.is_showing,\n                   info_id: field.info_id,\n                   type: field.type,\n                   type_name: this.getDataTypeName(field.type),\n                   quick_add: field.quick_add\n               }\n           )\n        ).sort((a, b) => {\n            return a.name.localeCompare(b.name);\n        });\n\n        const columns = [\n            {\n                accessor: 'name',\n                label: 'Field',\n                priorityLevel: 1,\n                position: 1,\n                minWidth: 100,\n                sortable: false\n            },\n            {\n                accessor: 'type_name',\n                label: 'Data Type',\n                priorityLevel: 2,\n                position: 2,\n                minWidth: 100,\n                sortable: false\n            },\n            {\n                accessor: 'is_showing',\n                label: 'Currently in Use',\n                priorityLevel: 3,\n                position: 3,\n                CustomComponent: StudentFieldCheckbox,\n                minWidth: 50,\n                sortable: false\n            },\n            {\n                accessor: 'quick_add',\n                label: 'Show in Quick Add',\n                priorityLevel: 4,\n                position: 4,\n                CustomComponent: StudentFieldCheckbox,\n                minWidth: 50,\n                sortable: false\n            },\n        ];\n        const tableCallbacks = { is_showing: this.updateCheckbox, quick_add: this.updateCheckbox }\n        return (\n            <div className=\"content\">\n                <h1>Student Profile Fields</h1>\n                <ButtonToolbar style={{ float: 'right'}}>\n                    <Button onClick={this.openModal}>New Student Profile Field</Button>\n                </ButtonToolbar>\n                <AddStudentFieldModal show={this.state.showModal}\n                    onSubmit={this.closeModal} />\n                <ReactCollapsingTable\n                        rows = { rows }\n                        columns = { columns }\n                        column = {'name'}\n                        direction = {'descending'}\n                        showPagination={ true }\n                        callbacks = { tableCallbacks }\n                />\n            </div>\n        );\n    }\n}\n\nexport default EditStudentFields;","import React from 'react';\nimport { Tabs, Tab } from 'react-bootstrap';\nimport Users from './Users';\nimport Roles from './Roles';\nimport StudentKeys from './StudentKeys';\nimport Activities from './Activities';\nimport EditStudentFields from './EditStudentFields';\n\nclass AdminTabs extends React.Component {\n    constructor(props, context) {\n      super(props, context);\n  \n      this.handleSelect = this.handleSelect.bind(this);\n      this.toggleRefreshRoles = this.toggleRefreshRoles.bind(this);\n      this.state = {\n        refreshRoles: false,\n        key: 1\n      };\n    }\n  \n    handleSelect(key) {\n      this.setState({ key });\n    }\n\n    toggleRefreshRoles(boolean) {\n      this.setState({ refreshRoles: boolean });\n    }\n  \n    render() {\n      return (\n        <Tabs\n          activeKey={this.state.key}\n          onSelect={this.handleSelect}\n          id=\"admin-tabs\"\n        >\n          <Tab eventKey={1} title=\"User Management\">\n            <Users toggleRefreshRoles={this.toggleRefreshRoles} refreshRoles={this.state.refreshRoles}/>\n          </Tab>\n          <Tab eventKey={2} title=\"User Roles\">\n            <Roles toggleRefreshRoles={this.toggleRefreshRoles}/>\n          </Tab>\n          <Tab eventKey={3} title=\"Attendance Activities\">\n            <Activities />\n          </Tab>\n          <Tab eventKey={4} title=\"Student Profile Fields\">\n            <EditStudentFields />\n          </Tab>\n          <Tab eventKey={5} title=\"Student Key Management\">\n            <StudentKeys/>\n          </Tab>\n        </Tabs>\n      );\n    }\n  }\n  \nexport default AdminTabs;","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport AdminTabs from '../components/AdminTabs';\n\nclass Admin extends React.Component {\n\n    render() {\n        let permissions = window.localStorage.getItem('permissions').split(',')\n        if (permissions.indexOf('view_user') >= 0 || permissions.indexOf('view_group') >= 0) {\n            return (\n                <div className='content'>\n                    <AdminTabs />\n                </div>\n            );\n        } else {\n            return (<Redirect to='/attendance'/>);\n        }\n    }\n}\n\nexport default Admin;","import React from 'react';\nimport  { Link } from 'react-router-dom';\nimport { Jumbotron } from 'react-bootstrap';\n\nclass NotFound extends React.Component {\n    render() {\n        return (\n            <div className='content'>\n                <Jumbotron> \n                    <div className='content-jumbotron'>\n                        <h1>\n                            404 <small>page not found</small>\n                        </h1>\n                        <p>\n                            The page you're looking for has mysteriously disappeared! \n                            Try navigating from <Link to='/attendance'>the home page</Link> to take another look.\n                        </p>\n                    </div>\n                </Jumbotron>\n            </div>\n        );\n    }\n}\n\nexport default NotFound;","import React from 'react';\nimport { Route, Switch, withRouter } from 'react-router';\nimport Layout from './Layout';\nimport Login from '../views/Login';\nimport Attendance from '../views/Attendance';\nimport Students from '../views/Students';\nimport Reports from '../views/Reports';\nimport Admin from '../views/Admin';\nimport NotFound from '../views/NotFound';\nimport { checkCredentials } from './Helpers';\n\nclass Router extends React.Component {\n\n    render() {\n        return (\n            <Layout show={this.props.location.pathname !== '/'}>\n                <Switch>\n                    <Route exact path='/' component={Login}/>\n                    <Route exact path='/attendance' render={() => checkCredentials(Attendance)}/>\n                    <Route path='/students' component={(props) => checkCredentials(Students)}/> {/* Referencing the component this way causes a re-mount every time the NavBar button is clicked, which solves our problem of refreshing the page but costs some performance in teh frontend and calls to the database */}\n                    <Route path='/reports' render={() => checkCredentials(Reports)}/>\n                    <Route path='/admin' render={() => checkCredentials(Admin)}/>\n                    <Route render={() => checkCredentials(NotFound)}/>\n                </Switch>\n            </Layout>\n        );\n    }\n}\n\nexport default withRouter(Router);","import React, { Component } from 'react';\nimport Router from './components/Router';\nimport { history } from './components/Helpers'\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <Router history={history}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>, \n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}